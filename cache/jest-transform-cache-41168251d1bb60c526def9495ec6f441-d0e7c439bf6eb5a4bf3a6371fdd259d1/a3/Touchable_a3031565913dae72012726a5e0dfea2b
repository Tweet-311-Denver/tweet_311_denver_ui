bd262bdf53fa1e02bb363a62cde2c54c
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var BoundingDimensions = require("./BoundingDimensions");

var Platform = require("../../Utilities/Platform");

var Position = require("./Position");

var React = require('react');

var ReactNative = require("../../Renderer/shims/ReactNative");

var StyleSheet = require("../../StyleSheet/StyleSheet");

var TVEventHandler = require("../AppleTV/TVEventHandler");

var UIManager = require("../../ReactNative/UIManager");

var View = require("../View/View");

var keyMirror = require('fbjs/lib/keyMirror');

var normalizeColor = require("../../Color/normalizeColor");

var extractSingleTouch = function extractSingleTouch(nativeEvent) {
  var touches = nativeEvent.touches;
  var changedTouches = nativeEvent.changedTouches;
  var hasTouches = touches && touches.length > 0;
  var hasChangedTouches = changedTouches && changedTouches.length > 0;
  return !hasTouches && hasChangedTouches ? changedTouches[0] : hasTouches ? touches[0] : nativeEvent;
};

var States = keyMirror({
  NOT_RESPONDER: null,
  RESPONDER_INACTIVE_PRESS_IN: null,
  RESPONDER_INACTIVE_PRESS_OUT: null,
  RESPONDER_ACTIVE_PRESS_IN: null,
  RESPONDER_ACTIVE_PRESS_OUT: null,
  RESPONDER_ACTIVE_LONG_PRESS_IN: null,
  RESPONDER_ACTIVE_LONG_PRESS_OUT: null,
  ERROR: null
});
var baseStatesConditions = {
  NOT_RESPONDER: false,
  RESPONDER_INACTIVE_PRESS_IN: false,
  RESPONDER_INACTIVE_PRESS_OUT: false,
  RESPONDER_ACTIVE_PRESS_IN: false,
  RESPONDER_ACTIVE_PRESS_OUT: false,
  RESPONDER_ACTIVE_LONG_PRESS_IN: false,
  RESPONDER_ACTIVE_LONG_PRESS_OUT: false,
  ERROR: false
};

var IsActive = _objectSpread({}, baseStatesConditions, {
  RESPONDER_ACTIVE_PRESS_OUT: true,
  RESPONDER_ACTIVE_PRESS_IN: true
});

var IsPressingIn = _objectSpread({}, baseStatesConditions, {
  RESPONDER_INACTIVE_PRESS_IN: true,
  RESPONDER_ACTIVE_PRESS_IN: true,
  RESPONDER_ACTIVE_LONG_PRESS_IN: true
});

var IsLongPressingIn = _objectSpread({}, baseStatesConditions, {
  RESPONDER_ACTIVE_LONG_PRESS_IN: true
});

var Signals = keyMirror({
  DELAY: null,
  RESPONDER_GRANT: null,
  RESPONDER_RELEASE: null,
  RESPONDER_TERMINATED: null,
  ENTER_PRESS_RECT: null,
  LEAVE_PRESS_RECT: null,
  LONG_PRESS_DETECTED: null
});
var Transitions = {
  NOT_RESPONDER: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.RESPONDER_INACTIVE_PRESS_IN,
    RESPONDER_RELEASE: States.ERROR,
    RESPONDER_TERMINATED: States.ERROR,
    ENTER_PRESS_RECT: States.ERROR,
    LEAVE_PRESS_RECT: States.ERROR,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_INACTIVE_PRESS_IN: {
    DELAY: States.RESPONDER_ACTIVE_PRESS_IN,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_INACTIVE_PRESS_OUT: {
    DELAY: States.RESPONDER_ACTIVE_PRESS_OUT,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_INACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_ACTIVE_PRESS_IN: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.RESPONDER_ACTIVE_LONG_PRESS_IN
  },
  RESPONDER_ACTIVE_PRESS_OUT: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  RESPONDER_ACTIVE_LONG_PRESS_IN: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
    LONG_PRESS_DETECTED: States.RESPONDER_ACTIVE_LONG_PRESS_IN
  },
  RESPONDER_ACTIVE_LONG_PRESS_OUT: {
    DELAY: States.ERROR,
    RESPONDER_GRANT: States.ERROR,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_IN,
    LEAVE_PRESS_RECT: States.RESPONDER_ACTIVE_LONG_PRESS_OUT,
    LONG_PRESS_DETECTED: States.ERROR
  },
  error: {
    DELAY: States.NOT_RESPONDER,
    RESPONDER_GRANT: States.RESPONDER_INACTIVE_PRESS_IN,
    RESPONDER_RELEASE: States.NOT_RESPONDER,
    RESPONDER_TERMINATED: States.NOT_RESPONDER,
    ENTER_PRESS_RECT: States.NOT_RESPONDER,
    LEAVE_PRESS_RECT: States.NOT_RESPONDER,
    LONG_PRESS_DETECTED: States.NOT_RESPONDER
  }
};
var HIGHLIGHT_DELAY_MS = 130;
var PRESS_EXPAND_PX = 20;
var LONG_PRESS_THRESHOLD = 500;
var LONG_PRESS_DELAY_MS = LONG_PRESS_THRESHOLD - HIGHLIGHT_DELAY_MS;
var LONG_PRESS_ALLOWED_MOVEMENT = 10;
var TouchableMixin = {
  componentDidMount: function componentDidMount() {
    if (!Platform.isTV) {
      return;
    }

    this._tvEventHandler = new TVEventHandler();

    this._tvEventHandler.enable(this, function (cmp, evt) {
      var myTag = ReactNative.findNodeHandle(cmp);
      evt.dispatchConfig = {};

      if (myTag === evt.tag) {
        if (evt.eventType === 'focus') {
          cmp.touchableHandleFocus(evt);
        } else if (evt.eventType === 'blur') {
          cmp.touchableHandleBlur(evt);
        } else if (evt.eventType === 'select') {
          cmp.touchableHandlePress && !cmp.props.disabled && cmp.touchableHandlePress(evt);
        }
      }
    });
  },
  componentWillUnmount: function componentWillUnmount() {
    if (this._tvEventHandler) {
      this._tvEventHandler.disable();

      delete this._tvEventHandler;
    }

    this.touchableDelayTimeout && clearTimeout(this.touchableDelayTimeout);
    this.longPressDelayTimeout && clearTimeout(this.longPressDelayTimeout);
    this.pressOutDelayTimeout && clearTimeout(this.pressOutDelayTimeout);
  },
  touchableGetInitialState: function touchableGetInitialState() {
    return {
      touchable: {
        touchState: undefined,
        responderID: null
      }
    };
  },
  touchableHandleResponderTerminationRequest: function touchableHandleResponderTerminationRequest() {
    return !this.props.rejectResponderTermination;
  },
  touchableHandleStartShouldSetResponder: function touchableHandleStartShouldSetResponder() {
    return !this.props.disabled;
  },
  touchableLongPressCancelsPress: function touchableLongPressCancelsPress() {
    return true;
  },
  touchableHandleResponderGrant: function touchableHandleResponderGrant(e) {
    var dispatchID = e.currentTarget;
    e.persist();
    this.pressOutDelayTimeout && clearTimeout(this.pressOutDelayTimeout);
    this.pressOutDelayTimeout = null;
    this.state.touchable.touchState = States.NOT_RESPONDER;
    this.state.touchable.responderID = dispatchID;

    this._receiveSignal(Signals.RESPONDER_GRANT, e);

    var delayMS = this.touchableGetHighlightDelayMS !== undefined ? Math.max(this.touchableGetHighlightDelayMS(), 0) : HIGHLIGHT_DELAY_MS;
    delayMS = isNaN(delayMS) ? HIGHLIGHT_DELAY_MS : delayMS;

    if (delayMS !== 0) {
      this.touchableDelayTimeout = setTimeout(this._handleDelay.bind(this, e), delayMS);
    } else {
      this._handleDelay(e);
    }

    var longDelayMS = this.touchableGetLongPressDelayMS !== undefined ? Math.max(this.touchableGetLongPressDelayMS(), 10) : LONG_PRESS_DELAY_MS;
    longDelayMS = isNaN(longDelayMS) ? LONG_PRESS_DELAY_MS : longDelayMS;
    this.longPressDelayTimeout = setTimeout(this._handleLongDelay.bind(this, e), longDelayMS + delayMS);
  },
  touchableHandleResponderRelease: function touchableHandleResponderRelease(e) {
    this.pressInLocation = null;

    this._receiveSignal(Signals.RESPONDER_RELEASE, e);
  },
  touchableHandleResponderTerminate: function touchableHandleResponderTerminate(e) {
    this.pressInLocation = null;

    this._receiveSignal(Signals.RESPONDER_TERMINATED, e);
  },
  touchableHandleResponderMove: function touchableHandleResponderMove(e) {
    if (!this.state.touchable.positionOnActivate) {
      return;
    }

    var positionOnActivate = this.state.touchable.positionOnActivate;
    var dimensionsOnActivate = this.state.touchable.dimensionsOnActivate;
    var pressRectOffset = this.touchableGetPressRectOffset ? this.touchableGetPressRectOffset() : {
      left: PRESS_EXPAND_PX,
      right: PRESS_EXPAND_PX,
      top: PRESS_EXPAND_PX,
      bottom: PRESS_EXPAND_PX
    };
    var pressExpandLeft = pressRectOffset.left;
    var pressExpandTop = pressRectOffset.top;
    var pressExpandRight = pressRectOffset.right;
    var pressExpandBottom = pressRectOffset.bottom;
    var hitSlop = this.touchableGetHitSlop ? this.touchableGetHitSlop() : null;

    if (hitSlop) {
      pressExpandLeft += hitSlop.left || 0;
      pressExpandTop += hitSlop.top || 0;
      pressExpandRight += hitSlop.right || 0;
      pressExpandBottom += hitSlop.bottom || 0;
    }

    var touch = extractSingleTouch(e.nativeEvent);
    var pageX = touch && touch.pageX;
    var pageY = touch && touch.pageY;

    if (this.pressInLocation) {
      var movedDistance = this._getDistanceBetweenPoints(pageX, pageY, this.pressInLocation.pageX, this.pressInLocation.pageY);

      if (movedDistance > LONG_PRESS_ALLOWED_MOVEMENT) {
        this._cancelLongPressDelayTimeout();
      }
    }

    var isTouchWithinActive = pageX > positionOnActivate.left - pressExpandLeft && pageY > positionOnActivate.top - pressExpandTop && pageX < positionOnActivate.left + dimensionsOnActivate.width + pressExpandRight && pageY < positionOnActivate.top + dimensionsOnActivate.height + pressExpandBottom;

    if (isTouchWithinActive) {
      var prevState = this.state.touchable.touchState;

      this._receiveSignal(Signals.ENTER_PRESS_RECT, e);

      var curState = this.state.touchable.touchState;

      if (curState === States.RESPONDER_INACTIVE_PRESS_IN && prevState !== States.RESPONDER_INACTIVE_PRESS_IN) {
        this._cancelLongPressDelayTimeout();
      }
    } else {
      this._cancelLongPressDelayTimeout();

      this._receiveSignal(Signals.LEAVE_PRESS_RECT, e);
    }
  },
  touchableHandleFocus: function touchableHandleFocus(e) {
    this.props.onFocus && this.props.onFocus(e);
  },
  touchableHandleBlur: function touchableHandleBlur(e) {
    this.props.onBlur && this.props.onBlur(e);
  },
  _remeasureMetricsOnActivation: function _remeasureMetricsOnActivation() {
    var tag = this.state.touchable.responderID;

    if (tag == null) {
      return;
    }

    UIManager.measure(tag, this._handleQueryLayout);
  },
  _handleQueryLayout: function _handleQueryLayout(l, t, w, h, globalX, globalY) {
    if (!l && !t && !w && !h && !globalX && !globalY) {
      return;
    }

    this.state.touchable.positionOnActivate && Position.release(this.state.touchable.positionOnActivate);
    this.state.touchable.dimensionsOnActivate && BoundingDimensions.release(this.state.touchable.dimensionsOnActivate);
    this.state.touchable.positionOnActivate = Position.getPooled(globalX, globalY);
    this.state.touchable.dimensionsOnActivate = BoundingDimensions.getPooled(w, h);
  },
  _handleDelay: function _handleDelay(e) {
    this.touchableDelayTimeout = null;

    this._receiveSignal(Signals.DELAY, e);
  },
  _handleLongDelay: function _handleLongDelay(e) {
    this.longPressDelayTimeout = null;
    var curState = this.state.touchable.touchState;

    if (curState !== States.RESPONDER_ACTIVE_PRESS_IN && curState !== States.RESPONDER_ACTIVE_LONG_PRESS_IN) {
      console.error('Attempted to transition from state `' + curState + '` to `' + States.RESPONDER_ACTIVE_LONG_PRESS_IN + '`, which is not supported. This is ' + 'most likely due to `Touchable.longPressDelayTimeout` not being cancelled.');
    } else {
      this._receiveSignal(Signals.LONG_PRESS_DETECTED, e);
    }
  },
  _receiveSignal: function _receiveSignal(signal, e) {
    var responderID = this.state.touchable.responderID;
    var curState = this.state.touchable.touchState;
    var nextState = Transitions[curState] && Transitions[curState][signal];

    if (!responderID && signal === Signals.RESPONDER_RELEASE) {
      return;
    }

    if (!nextState) {
      throw new Error('Unrecognized signal `' + signal + '` or state `' + curState + '` for Touchable responder `' + responderID + '`');
    }

    if (nextState === States.ERROR) {
      throw new Error('Touchable cannot transition from `' + curState + '` to `' + signal + '` for responder `' + responderID + '`');
    }

    if (curState !== nextState) {
      this._performSideEffectsForTransition(curState, nextState, signal, e);

      this.state.touchable.touchState = nextState;
    }
  },
  _cancelLongPressDelayTimeout: function _cancelLongPressDelayTimeout() {
    this.longPressDelayTimeout && clearTimeout(this.longPressDelayTimeout);
    this.longPressDelayTimeout = null;
  },
  _isHighlight: function _isHighlight(state) {
    return state === States.RESPONDER_ACTIVE_PRESS_IN || state === States.RESPONDER_ACTIVE_LONG_PRESS_IN;
  },
  _savePressInLocation: function _savePressInLocation(e) {
    var touch = extractSingleTouch(e.nativeEvent);
    var pageX = touch && touch.pageX;
    var pageY = touch && touch.pageY;
    var locationX = touch && touch.locationX;
    var locationY = touch && touch.locationY;
    this.pressInLocation = {
      pageX: pageX,
      pageY: pageY,
      locationX: locationX,
      locationY: locationY
    };
  },
  _getDistanceBetweenPoints: function _getDistanceBetweenPoints(aX, aY, bX, bY) {
    var deltaX = aX - bX;
    var deltaY = aY - bY;
    return Math.sqrt(deltaX * deltaX + deltaY * deltaY);
  },
  _performSideEffectsForTransition: function _performSideEffectsForTransition(curState, nextState, signal, e) {
    var curIsHighlight = this._isHighlight(curState);

    var newIsHighlight = this._isHighlight(nextState);

    var isFinalSignal = signal === Signals.RESPONDER_TERMINATED || signal === Signals.RESPONDER_RELEASE;

    if (isFinalSignal) {
      this._cancelLongPressDelayTimeout();
    }

    var isInitialTransition = curState === States.NOT_RESPONDER && nextState === States.RESPONDER_INACTIVE_PRESS_IN;
    var isActiveTransition = !IsActive[curState] && IsActive[nextState];

    if (isInitialTransition || isActiveTransition) {
      this._remeasureMetricsOnActivation();
    }

    if (IsPressingIn[curState] && signal === Signals.LONG_PRESS_DETECTED) {
      this.touchableHandleLongPress && this.touchableHandleLongPress(e);
    }

    if (newIsHighlight && !curIsHighlight) {
      this._startHighlight(e);
    } else if (!newIsHighlight && curIsHighlight) {
      this._endHighlight(e);
    }

    if (IsPressingIn[curState] && signal === Signals.RESPONDER_RELEASE) {
      var hasLongPressHandler = !!this.props.onLongPress;
      var pressIsLongButStillCallOnPress = IsLongPressingIn[curState] && (!hasLongPressHandler || !this.touchableLongPressCancelsPress());
      var shouldInvokePress = !IsLongPressingIn[curState] || pressIsLongButStillCallOnPress;

      if (shouldInvokePress && this.touchableHandlePress) {
        if (!newIsHighlight && !curIsHighlight) {
          this._startHighlight(e);

          this._endHighlight(e);
        }

        if (Platform.OS === 'android' && !this.props.touchSoundDisabled) {
          this._playTouchSound();
        }

        this.touchableHandlePress(e);
      }
    }

    this.touchableDelayTimeout && clearTimeout(this.touchableDelayTimeout);
    this.touchableDelayTimeout = null;
  },
  _playTouchSound: function _playTouchSound() {
    UIManager.playTouchSound();
  },
  _startHighlight: function _startHighlight(e) {
    this._savePressInLocation(e);

    this.touchableHandleActivePressIn && this.touchableHandleActivePressIn(e);
  },
  _endHighlight: function _endHighlight(e) {
    var _this = this;

    if (this.touchableHandleActivePressOut) {
      if (this.touchableGetPressOutDelayMS && this.touchableGetPressOutDelayMS()) {
        this.pressOutDelayTimeout = setTimeout(function () {
          _this.touchableHandleActivePressOut(e);
        }, this.touchableGetPressOutDelayMS());
      } else {
        this.touchableHandleActivePressOut(e);
      }
    }
  },
  withoutDefaultFocusAndBlur: {}
};
var touchableHandleFocus = TouchableMixin.touchableHandleFocus,
    touchableHandleBlur = TouchableMixin.touchableHandleBlur,
    TouchableMixinWithoutDefaultFocusAndBlur = (0, _objectWithoutProperties2.default)(TouchableMixin, ["touchableHandleFocus", "touchableHandleBlur"]);
TouchableMixin.withoutDefaultFocusAndBlur = TouchableMixinWithoutDefaultFocusAndBlur;
var Touchable = {
  Mixin: TouchableMixin,
  TOUCH_TARGET_DEBUG: false,
  renderDebugView: function renderDebugView(_ref) {
    var color = _ref.color,
        hitSlop = _ref.hitSlop;

    if (!Touchable.TOUCH_TARGET_DEBUG) {
      return null;
    }

    if (!__DEV__) {
      throw Error('Touchable.TOUCH_TARGET_DEBUG should not be enabled in prod!');
    }

    var debugHitSlopStyle = {};
    hitSlop = hitSlop || {
      top: 0,
      bottom: 0,
      left: 0,
      right: 0
    };

    for (var key in hitSlop) {
      debugHitSlopStyle[key] = -hitSlop[key];
    }

    var normalizedColor = normalizeColor(color);

    if (typeof normalizedColor !== 'number') {
      return null;
    }

    var hexColor = '#' + ('00000000' + normalizedColor.toString(16)).substr(-8);
    return React.createElement(View, {
      pointerEvents: "none",
      style: [styles.debug, _objectSpread({
        borderColor: hexColor.slice(0, -2) + '55',
        backgroundColor: hexColor.slice(0, -2) + '0F'
      }, debugHitSlopStyle)]
    });
  }
};
var styles = StyleSheet.create({
  debug: {
    position: 'absolute',
    borderWidth: 1,
    borderStyle: 'dashed'
  }
});
module.exports = Touchable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRvdWNoYWJsZS5qcyJdLCJuYW1lcyI6WyJCb3VuZGluZ0RpbWVuc2lvbnMiLCJyZXF1aXJlIiwiUGxhdGZvcm0iLCJQb3NpdGlvbiIsIlJlYWN0IiwiUmVhY3ROYXRpdmUiLCJTdHlsZVNoZWV0IiwiVFZFdmVudEhhbmRsZXIiLCJVSU1hbmFnZXIiLCJWaWV3Iiwia2V5TWlycm9yIiwibm9ybWFsaXplQ29sb3IiLCJleHRyYWN0U2luZ2xlVG91Y2giLCJuYXRpdmVFdmVudCIsInRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsImhhc1RvdWNoZXMiLCJsZW5ndGgiLCJoYXNDaGFuZ2VkVG91Y2hlcyIsIlN0YXRlcyIsIk5PVF9SRVNQT05ERVIiLCJSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4iLCJSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUIiwiUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTiIsIlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUIiwiUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOIiwiUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVCIsIkVSUk9SIiwiYmFzZVN0YXRlc0NvbmRpdGlvbnMiLCJJc0FjdGl2ZSIsIklzUHJlc3NpbmdJbiIsIklzTG9uZ1ByZXNzaW5nSW4iLCJTaWduYWxzIiwiREVMQVkiLCJSRVNQT05ERVJfR1JBTlQiLCJSRVNQT05ERVJfUkVMRUFTRSIsIlJFU1BPTkRFUl9URVJNSU5BVEVEIiwiRU5URVJfUFJFU1NfUkVDVCIsIkxFQVZFX1BSRVNTX1JFQ1QiLCJMT05HX1BSRVNTX0RFVEVDVEVEIiwiVHJhbnNpdGlvbnMiLCJlcnJvciIsIkhJR0hMSUdIVF9ERUxBWV9NUyIsIlBSRVNTX0VYUEFORF9QWCIsIkxPTkdfUFJFU1NfVEhSRVNIT0xEIiwiTE9OR19QUkVTU19ERUxBWV9NUyIsIkxPTkdfUFJFU1NfQUxMT1dFRF9NT1ZFTUVOVCIsIlRvdWNoYWJsZU1peGluIiwiY29tcG9uZW50RGlkTW91bnQiLCJpc1RWIiwiX3R2RXZlbnRIYW5kbGVyIiwiZW5hYmxlIiwiY21wIiwiZXZ0IiwibXlUYWciLCJmaW5kTm9kZUhhbmRsZSIsImRpc3BhdGNoQ29uZmlnIiwidGFnIiwiZXZlbnRUeXBlIiwidG91Y2hhYmxlSGFuZGxlRm9jdXMiLCJ0b3VjaGFibGVIYW5kbGVCbHVyIiwidG91Y2hhYmxlSGFuZGxlUHJlc3MiLCJwcm9wcyIsImRpc2FibGVkIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJkaXNhYmxlIiwidG91Y2hhYmxlRGVsYXlUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwibG9uZ1ByZXNzRGVsYXlUaW1lb3V0IiwicHJlc3NPdXREZWxheVRpbWVvdXQiLCJ0b3VjaGFibGVHZXRJbml0aWFsU3RhdGUiLCJ0b3VjaGFibGUiLCJ0b3VjaFN0YXRlIiwidW5kZWZpbmVkIiwicmVzcG9uZGVySUQiLCJ0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJyZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbiIsInRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwidG91Y2hhYmxlTG9uZ1ByZXNzQ2FuY2Vsc1ByZXNzIiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnQiLCJlIiwiZGlzcGF0Y2hJRCIsImN1cnJlbnRUYXJnZXQiLCJwZXJzaXN0Iiwic3RhdGUiLCJfcmVjZWl2ZVNpZ25hbCIsImRlbGF5TVMiLCJ0b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TIiwiTWF0aCIsIm1heCIsImlzTmFOIiwic2V0VGltZW91dCIsIl9oYW5kbGVEZWxheSIsImJpbmQiLCJsb25nRGVsYXlNUyIsInRvdWNoYWJsZUdldExvbmdQcmVzc0RlbGF5TVMiLCJfaGFuZGxlTG9uZ0RlbGF5IiwidG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyUmVsZWFzZSIsInByZXNzSW5Mb2NhdGlvbiIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0ZSIsInRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlck1vdmUiLCJwb3NpdGlvbk9uQWN0aXZhdGUiLCJkaW1lbnNpb25zT25BY3RpdmF0ZSIsInByZXNzUmVjdE9mZnNldCIsInRvdWNoYWJsZUdldFByZXNzUmVjdE9mZnNldCIsImxlZnQiLCJyaWdodCIsInRvcCIsImJvdHRvbSIsInByZXNzRXhwYW5kTGVmdCIsInByZXNzRXhwYW5kVG9wIiwicHJlc3NFeHBhbmRSaWdodCIsInByZXNzRXhwYW5kQm90dG9tIiwiaGl0U2xvcCIsInRvdWNoYWJsZUdldEhpdFNsb3AiLCJ0b3VjaCIsInBhZ2VYIiwicGFnZVkiLCJtb3ZlZERpc3RhbmNlIiwiX2dldERpc3RhbmNlQmV0d2VlblBvaW50cyIsIl9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQiLCJpc1RvdWNoV2l0aGluQWN0aXZlIiwid2lkdGgiLCJoZWlnaHQiLCJwcmV2U3RhdGUiLCJjdXJTdGF0ZSIsIm9uRm9jdXMiLCJvbkJsdXIiLCJfcmVtZWFzdXJlTWV0cmljc09uQWN0aXZhdGlvbiIsIm1lYXN1cmUiLCJfaGFuZGxlUXVlcnlMYXlvdXQiLCJsIiwidCIsInciLCJoIiwiZ2xvYmFsWCIsImdsb2JhbFkiLCJyZWxlYXNlIiwiZ2V0UG9vbGVkIiwiY29uc29sZSIsInNpZ25hbCIsIm5leHRTdGF0ZSIsIkVycm9yIiwiX3BlcmZvcm1TaWRlRWZmZWN0c0ZvclRyYW5zaXRpb24iLCJfaXNIaWdobGlnaHQiLCJfc2F2ZVByZXNzSW5Mb2NhdGlvbiIsImxvY2F0aW9uWCIsImxvY2F0aW9uWSIsImFYIiwiYVkiLCJiWCIsImJZIiwiZGVsdGFYIiwiZGVsdGFZIiwic3FydCIsImN1cklzSGlnaGxpZ2h0IiwibmV3SXNIaWdobGlnaHQiLCJpc0ZpbmFsU2lnbmFsIiwiaXNJbml0aWFsVHJhbnNpdGlvbiIsImlzQWN0aXZlVHJhbnNpdGlvbiIsInRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyIsIl9zdGFydEhpZ2hsaWdodCIsIl9lbmRIaWdobGlnaHQiLCJoYXNMb25nUHJlc3NIYW5kbGVyIiwib25Mb25nUHJlc3MiLCJwcmVzc0lzTG9uZ0J1dFN0aWxsQ2FsbE9uUHJlc3MiLCJzaG91bGRJbnZva2VQcmVzcyIsIk9TIiwidG91Y2hTb3VuZERpc2FibGVkIiwiX3BsYXlUb3VjaFNvdW5kIiwicGxheVRvdWNoU291bmQiLCJ0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luIiwidG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQiLCJ0b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMiLCJ3aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1ciIsIlRvdWNoYWJsZU1peGluV2l0aG91dERlZmF1bHRGb2N1c0FuZEJsdXIiLCJUb3VjaGFibGUiLCJNaXhpbiIsIlRPVUNIX1RBUkdFVF9ERUJVRyIsInJlbmRlckRlYnVnVmlldyIsImNvbG9yIiwiX19ERVZfXyIsImRlYnVnSGl0U2xvcFN0eWxlIiwia2V5Iiwibm9ybWFsaXplZENvbG9yIiwiaGV4Q29sb3IiLCJ0b1N0cmluZyIsInN1YnN0ciIsInN0eWxlcyIsImRlYnVnIiwiYm9yZGVyQ29sb3IiLCJzbGljZSIsImJhY2tncm91bmRDb2xvciIsImNyZWF0ZSIsInBvc2l0aW9uIiwiYm9yZGVyV2lkdGgiLCJib3JkZXJTdHlsZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQVVBOzs7Ozs7Ozs7Ozs7QUFFQSxJQUFNQSxrQkFBa0IsR0FBR0MsT0FBTyx3QkFBbEM7O0FBQ0EsSUFBTUMsUUFBUSxHQUFHRCxPQUFPLDRCQUF4Qjs7QUFDQSxJQUFNRSxRQUFRLEdBQUdGLE9BQU8sY0FBeEI7O0FBQ0EsSUFBTUcsS0FBSyxHQUFHSCxPQUFPLENBQUMsT0FBRCxDQUFyQjs7QUFDQSxJQUFNSSxXQUFXLEdBQUdKLE9BQU8sb0NBQTNCOztBQUNBLElBQU1LLFVBQVUsR0FBR0wsT0FBTywrQkFBMUI7O0FBQ0EsSUFBTU0sY0FBYyxHQUFHTixPQUFPLDZCQUE5Qjs7QUFDQSxJQUFNTyxTQUFTLEdBQUdQLE9BQU8sK0JBQXpCOztBQUNB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LENBRlI7QUFHTEMsSUFBQUEsV0FBVyxFQUFFO0FBSFI7QUFEd0IsQ0FBbEIsQ0FBZjtBQVFBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJ0QixTQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmNvbnN0IEJvdW5kaW5nRGltZW5zaW9ucyA9IHJlcXVpcmUoJy4vQm91bmRpbmdEaW1lbnNpb25zJyk7XG5jb25zdCBQbGF0Zm9ybSA9IHJlcXVpcmUoJy4uLy4uL1V0aWxpdGllcy9QbGF0Zm9ybScpO1xuY29uc3QgUG9zaXRpb24gPSByZXF1aXJlKCcuL1Bvc2l0aW9uJyk7XG5jb25zdCBSZWFjdCA9IHJlcXVpcmUoJ3JlYWN0Jyk7XG5jb25zdCBSZWFjdE5hdGl2ZSA9IHJlcXVpcmUoJy4uLy4uL1JlbmRlcmVyL3NoaW1zL1JlYWN0TmF0aXZlJyk7XG5jb25zdCBTdHlsZVNoZWV0ID0gcmVxdWlyZSgnLi4vLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0Jyk7XG5jb25zdCBUVkV2ZW50SGFuZGxlciA9IHJlcXVpcmUoJy4uL0FwcGxlVFYvVFZFdmVudEhhbmRsZXInKTtcbmNvbnN0IFVJTWFuYWdlciA9IHJlcXVpcmUoJy4uLy4uL1JlYWN0TmF0aXZlL1VJTWFuYWdlcicpO1xuY29uc3QgVmlldyA9IHJlcXVpcmUoJy4uL1ZpZXcvVmlldycpO1xuXG5jb25zdCBrZXlNaXJyb3IgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlNaXJyb3InKTtcbmNvbnN0IG5vcm1hbGl6ZUNvbG9yID0gcmVxdWlyZSgnLi4vLi4vQ29sb3Ivbm9ybWFsaXplQ29sb3InKTtcblxuaW1wb3J0IHR5cGUge0VkZ2VJbnNldHNQcm9wfSBmcm9tICcuLi8uLi9TdHlsZVNoZWV0L0VkZ2VJbnNldHNQcm9wVHlwZSc7XG5pbXBvcnQgdHlwZSB7UHJlc3NFdmVudH0gZnJvbSAnLi4vLi4vVHlwZXMvQ29yZUV2ZW50VHlwZXMnO1xuXG5jb25zdCBleHRyYWN0U2luZ2xlVG91Y2ggPSBuYXRpdmVFdmVudCA9PiB7XG4gIGNvbnN0IHRvdWNoZXMgPSBuYXRpdmVFdmVudC50b3VjaGVzO1xuICBjb25zdCBjaGFuZ2VkVG91Y2hlcyA9IG5hdGl2ZUV2ZW50LmNoYW5nZWRUb3VjaGVzO1xuICBjb25zdCBoYXNUb3VjaGVzID0gdG91Y2hlcyAmJiB0b3VjaGVzLmxlbmd0aCA+IDA7XG4gIGNvbnN0IGhhc0NoYW5nZWRUb3VjaGVzID0gY2hhbmdlZFRvdWNoZXMgJiYgY2hhbmdlZFRvdWNoZXMubGVuZ3RoID4gMDtcblxuICByZXR1cm4gIWhhc1RvdWNoZXMgJiYgaGFzQ2hhbmdlZFRvdWNoZXNcbiAgICA/IGNoYW5nZWRUb3VjaGVzWzBdXG4gICAgOiBoYXNUb3VjaGVzXG4gICAgPyB0b3VjaGVzWzBdXG4gICAgOiBuYXRpdmVFdmVudDtcbn07XG5cbi8qKlxuICogYFRvdWNoYWJsZWA6IFRhcHMgZG9uZSByaWdodC5cbiAqXG4gKiBZb3UgaG9vayB5b3VyIGBSZXNwb25kZXJFdmVudFBsdWdpbmAgZXZlbnRzIGludG8gYFRvdWNoYWJsZWAuIGBUb3VjaGFibGVgXG4gKiB3aWxsIG1lYXN1cmUgdGltZS9nZW9tZXRyeSBhbmQgdGVsbHMgeW91IHdoZW4gdG8gZ2l2ZSBmZWVkYmFjayB0byB0aGUgdXNlci5cbiAqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09IFRvdWNoYWJsZSBUdXRvcmlhbCA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBUaGUgYFRvdWNoYWJsZWAgbWl4aW4gaGVscHMgeW91IGhhbmRsZSB0aGUgXCJwcmVzc1wiIGludGVyYWN0aW9uLiBJdCBhbmFseXplc1xuICogdGhlIGdlb21ldHJ5IG9mIGVsZW1lbnRzLCBhbmQgb2JzZXJ2ZXMgd2hlbiBhbm90aGVyIHJlc3BvbmRlciAoc2Nyb2xsIHZpZXdcbiAqIGV0YykgaGFzIHN0b2xlbiB0aGUgdG91Y2ggbG9jay4gSXQgbm90aWZpZXMgeW91ciBjb21wb25lbnQgd2hlbiBpdCBzaG91bGRcbiAqIGdpdmUgZmVlZGJhY2sgdG8gdGhlIHVzZXIuIChib3VuY2luZy9oaWdobGlnaHRpbmcvdW5oaWdobGlnaHRpbmcpLlxuICpcbiAqIC0gV2hlbiBhIHRvdWNoIHdhcyBhY3RpdmF0ZWQgKHR5cGljYWxseSB5b3UgaGlnaGxpZ2h0KVxuICogLSBXaGVuIGEgdG91Y2ggd2FzIGRlYWN0aXZhdGVkICh0eXBpY2FsbHkgeW91IHVuaGlnaGxpZ2h0KVxuICogLSBXaGVuIGEgdG91Y2ggd2FzIFwicHJlc3NlZFwiIC0gYSB0b3VjaCBlbmRlZCB3aGlsZSBzdGlsbCB3aXRoaW4gdGhlIGdlb21ldHJ5XG4gKiAgIG9mIHRoZSBlbGVtZW50LCBhbmQgbm8gb3RoZXIgZWxlbWVudCAobGlrZSBzY3JvbGxlcikgaGFzIFwic3RvbGVuXCIgdG91Y2hcbiAqICAgbG9jayAoXCJyZXNwb25kZXJcIikgKFR5cGljYWxseSB5b3UgYm91bmNlIHRoZSBlbGVtZW50KS5cbiAqXG4gKiBBIGdvb2QgdGFwIGludGVyYWN0aW9uIGlzbid0IGFzIHNpbXBsZSBhcyB5b3UgbWlnaHQgdGhpbmsuIFRoZXJlIHNob3VsZCBiZSBhXG4gKiBzbGlnaHQgZGVsYXkgYmVmb3JlIHNob3dpbmcgYSBoaWdobGlnaHQgd2hlbiBzdGFydGluZyBhIHRvdWNoLiBJZiBhXG4gKiBzdWJzZXF1ZW50IHRvdWNoIG1vdmUgZXhjZWVkcyB0aGUgYm91bmRhcnkgb2YgdGhlIGVsZW1lbnQsIGl0IHNob3VsZFxuICogdW5oaWdobGlnaHQsIGJ1dCBpZiB0aGF0IHNhbWUgdG91Y2ggaXMgYnJvdWdodCBiYWNrIHdpdGhpbiB0aGUgYm91bmRhcnksIGl0XG4gKiBzaG91bGQgcmVoaWdobGlnaHQgYWdhaW4uIEEgdG91Y2ggY2FuIG1vdmUgaW4gYW5kIG91dCBvZiB0aGF0IGJvdW5kYXJ5XG4gKiBzZXZlcmFsIHRpbWVzLCBlYWNoIHRpbWUgdG9nZ2xpbmcgaGlnaGxpZ2h0aW5nLCBidXQgYSBcInByZXNzXCIgaXMgb25seVxuICogdHJpZ2dlcmVkIGlmIHRoYXQgdG91Y2ggZW5kcyB3aGlsZSB3aXRoaW4gdGhlIGVsZW1lbnQncyBib3VuZGFyeSBhbmQgbm9cbiAqIHNjcm9sbGVyIChvciBhbnl0aGluZyBlbHNlKSBoYXMgc3RvbGVuIHRoZSBsb2NrIG9uIHRvdWNoZXMuXG4gKlxuICogVG8gY3JlYXRlIGEgbmV3IHR5cGUgb2YgY29tcG9uZW50IHRoYXQgaGFuZGxlcyBpbnRlcmFjdGlvbiB1c2luZyB0aGVcbiAqIGBUb3VjaGFibGVgIG1peGluLCBkbyB0aGUgZm9sbG93aW5nOlxuICpcbiAqIC0gSW5pdGlhbGl6ZSB0aGUgYFRvdWNoYWJsZWAgc3RhdGUuXG4gKlxuICogICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICogICAgIHJldHVybiBtZXJnZSh0aGlzLnRvdWNoYWJsZUdldEluaXRpYWxTdGF0ZSgpLCB5b3VyQ29tcG9uZW50U3RhdGUpO1xuICogICB9XG4gKlxuICogLSBDaG9vc2UgdGhlIHJlbmRlcmVkIGNvbXBvbmVudCB3aG8ncyB0b3VjaGVzIHNob3VsZCBzdGFydCB0aGUgaW50ZXJhY3RpdmVcbiAqICAgc2VxdWVuY2UuIE9uIHRoYXQgcmVuZGVyZWQgbm9kZSwgZm9yd2FyZCBhbGwgYFRvdWNoYWJsZWAgcmVzcG9uZGVyXG4gKiAgIGhhbmRsZXJzLiBZb3UgY2FuIGNob29zZSBhbnkgcmVuZGVyZWQgbm9kZSB5b3UgbGlrZS4gQ2hvb3NlIGEgbm9kZSB3aG9zZVxuICogICBoaXQgdGFyZ2V0IHlvdSdkIGxpa2UgdG8gaW5zdGlnYXRlIHRoZSBpbnRlcmFjdGlvbiBzZXF1ZW5jZTpcbiAqXG4gKiAgIC8vIEluIHJlbmRlciBmdW5jdGlvbjpcbiAqICAgcmV0dXJuIChcbiAqICAgICA8Vmlld1xuICogICAgICAgb25TdGFydFNob3VsZFNldFJlc3BvbmRlcj17dGhpcy50b3VjaGFibGVIYW5kbGVTdGFydFNob3VsZFNldFJlc3BvbmRlcn1cbiAqICAgICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0PXt0aGlzLnRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdH1cbiAqICAgICAgIG9uUmVzcG9uZGVyR3JhbnQ9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyR3JhbnR9XG4gKiAgICAgICBvblJlc3BvbmRlck1vdmU9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyTW92ZX1cbiAqICAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZT17dGhpcy50b3VjaGFibGVIYW5kbGVSZXNwb25kZXJSZWxlYXNlfVxuICogICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGU9e3RoaXMudG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlfT5cbiAqICAgICAgIDxWaWV3PlxuICogICAgICAgICBFdmVuIHRob3VnaCB0aGUgaGl0IGRldGVjdGlvbi9pbnRlcmFjdGlvbnMgYXJlIHRyaWdnZXJlZCBieSB0aGVcbiAqICAgICAgICAgd3JhcHBpbmcgKHR5cGljYWxseSBsYXJnZXIpIG5vZGUsIHdlIHVzdWFsbHkgZW5kIHVwIGltcGxlbWVudGluZ1xuICogICAgICAgICBjdXN0b20gbG9naWMgdGhhdCBoaWdobGlnaHRzIHRoaXMgaW5uZXIgb25lLlxuICogICAgICAgPC9WaWV3PlxuICogICAgIDwvVmlldz5cbiAqICAgKTtcbiAqXG4gKiAtIFlvdSBtYXkgc2V0IHVwIHlvdXIgb3duIGhhbmRsZXJzIGZvciBlYWNoIG9mIHRoZXNlIGV2ZW50cywgc28gbG9uZyBhcyB5b3VcbiAqICAgYWxzbyBpbnZva2UgdGhlIGB0b3VjaGFibGUqYCBoYW5kbGVycyBpbnNpZGUgb2YgeW91ciBjdXN0b20gaGFuZGxlci5cbiAqXG4gKiAtIEltcGxlbWVudCB0aGUgaGFuZGxlcnMgb24geW91ciBjb21wb25lbnQgY2xhc3MgaW4gb3JkZXIgdG8gcHJvdmlkZVxuICogICBmZWVkYmFjayB0byB0aGUgdXNlci4gU2VlIGRvY3VtZW50YXRpb24gZm9yIGVhY2ggb2YgdGhlc2UgY2xhc3MgbWV0aG9kc1xuICogICB0aGF0IHlvdSBzaG91bGQgaW1wbGVtZW50LlxuICpcbiAqICAgdG91Y2hhYmxlSGFuZGxlUHJlc3M6IGZ1bmN0aW9uKCkge1xuICogICAgICB0aGlzLnBlcmZvcm1Cb3VuY2VBbmltYXRpb24oKTsgIC8vIG9yIHdoYXRldmVyIHlvdSB3YW50IHRvIGRvLlxuICogICB9LFxuICogICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luOiBmdW5jdGlvbigpIHtcbiAqICAgICB0aGlzLmJlZ2luSGlnaGxpZ2h0aW5nKC4uLik7ICAvLyBXaGF0ZXZlciB5b3UgbGlrZSB0byBjb252ZXkgYWN0aXZhdGlvblxuICogICB9LFxuICogICB0b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc091dDogZnVuY3Rpb24oKSB7XG4gKiAgICAgdGhpcy5lbmRIaWdobGlnaHRpbmcoLi4uKTsgIC8vIFdoYXRldmVyIHlvdSBsaWtlIHRvIGNvbnZleSBkZWFjdGl2YXRpb25cbiAqICAgfSxcbiAqXG4gKiAtIFRoZXJlIGFyZSBtb3JlIGFkdmFuY2VkIG1ldGhvZHMgeW91IGNhbiBpbXBsZW1lbnQgKHNlZSBkb2N1bWVudGF0aW9uIGJlbG93KTpcbiAqICAgdG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUzogZnVuY3Rpb24oKSB7XG4gKiAgICAgcmV0dXJuIDIwO1xuICogICB9XG4gKiAgIC8vIEluIHByYWN0aWNlLCAqYWx3YXlzKiB1c2UgYSBwcmVkZWNsYXJlZCBjb25zdGFudCAoY29uc2VydmUgbWVtb3J5KS5cbiAqICAgdG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0OiBmdW5jdGlvbigpIHtcbiAqICAgICByZXR1cm4ge3RvcDogMjAsIGxlZnQ6IDIwLCByaWdodDogMjAsIGJvdHRvbTogMTAwfTtcbiAqICAgfVxuICovXG5cbi8qKlxuICogVG91Y2hhYmxlIHN0YXRlcy5cbiAqL1xuXG5jb25zdCBTdGF0ZXMgPSBrZXlNaXJyb3Ioe1xuICBOT1RfUkVTUE9OREVSOiBudWxsLCAvLyBOb3QgdGhlIHJlc3BvbmRlclxuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU46IG51bGwsIC8vIFJlc3BvbmRlciwgaW5hY3RpdmUsIGluIHRoZSBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUOiBudWxsLCAvLyBSZXNwb25kZXIsIGluYWN0aXZlLCBvdXQgb2YgYFByZXNzUmVjdGBcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTjogbnVsbCwgLy8gUmVzcG9uZGVyLCBhY3RpdmUsIGluIHRoZSBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVDogbnVsbCwgLy8gUmVzcG9uZGVyLCBhY3RpdmUsIG91dCBvZiBgUHJlc3NSZWN0YFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IG51bGwsIC8vIFJlc3BvbmRlciwgYWN0aXZlLCBpbiB0aGUgYFByZXNzUmVjdGAsIGFmdGVyIGxvbmcgcHJlc3MgdGhyZXNob2xkXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQ6IG51bGwsIC8vIFJlc3BvbmRlciwgYWN0aXZlLCBvdXQgb2YgYFByZXNzUmVjdGAsIGFmdGVyIGxvbmcgcHJlc3MgdGhyZXNob2xkXG4gIEVSUk9SOiBudWxsLFxufSk7XG5cbnR5cGUgU3RhdGUgPVxuICB8IHR5cGVvZiBTdGF0ZXMuTk9UX1JFU1BPTkRFUlxuICB8IHR5cGVvZiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOXG4gIHwgdHlwZW9mIFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfT1VUXG4gIHwgdHlwZW9mIFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOXG4gIHwgdHlwZW9mIFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVFxuICB8IHR5cGVvZiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOXG4gIHwgdHlwZW9mIFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VUXG4gIHwgdHlwZW9mIFN0YXRlcy5FUlJPUjtcblxuLypcbiAqIFF1aWNrIGxvb2t1cCBtYXAgZm9yIHN0YXRlcyB0aGF0IGFyZSBjb25zaWRlcmVkIHRvIGJlIFwiYWN0aXZlXCJcbiAqL1xuXG5jb25zdCBiYXNlU3RhdGVzQ29uZGl0aW9ucyA9IHtcbiAgTk9UX1JFU1BPTkRFUjogZmFsc2UsXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTjogZmFsc2UsXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVQ6IGZhbHNlLFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOOiBmYWxzZSxcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVQ6IGZhbHNlLFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IGZhbHNlLFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VUOiBmYWxzZSxcbiAgRVJST1I6IGZhbHNlLFxufTtcblxuY29uc3QgSXNBY3RpdmUgPSB7XG4gIC4uLmJhc2VTdGF0ZXNDb25kaXRpb25zLFxuICBSRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVDogdHJ1ZSxcbiAgUkVTUE9OREVSX0FDVElWRV9QUkVTU19JTjogdHJ1ZSxcbn07XG5cbi8qKlxuICogUXVpY2sgbG9va3VwIGZvciBzdGF0ZXMgdGhhdCBhcmUgY29uc2lkZXJlZCB0byBiZSBcInByZXNzaW5nXCIgYW5kIGFyZVxuICogdGhlcmVmb3JlIGVsaWdpYmxlIHRvIHJlc3VsdCBpbiBhIFwic2VsZWN0aW9uXCIgaWYgdGhlIHByZXNzIHN0b3BzLlxuICovXG5jb25zdCBJc1ByZXNzaW5nSW4gPSB7XG4gIC4uLmJhc2VTdGF0ZXNDb25kaXRpb25zLFxuICBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU46IHRydWUsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU46IHRydWUsXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjogdHJ1ZSxcbn07XG5cbmNvbnN0IElzTG9uZ1ByZXNzaW5nSW4gPSB7XG4gIC4uLmJhc2VTdGF0ZXNDb25kaXRpb25zLFxuICBSRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU46IHRydWUsXG59O1xuXG4vKipcbiAqIElucHV0cyB0byB0aGUgc3RhdGUgbWFjaGluZS5cbiAqL1xuY29uc3QgU2lnbmFscyA9IGtleU1pcnJvcih7XG4gIERFTEFZOiBudWxsLFxuICBSRVNQT05ERVJfR1JBTlQ6IG51bGwsXG4gIFJFU1BPTkRFUl9SRUxFQVNFOiBudWxsLFxuICBSRVNQT05ERVJfVEVSTUlOQVRFRDogbnVsbCxcbiAgRU5URVJfUFJFU1NfUkVDVDogbnVsbCxcbiAgTEVBVkVfUFJFU1NfUkVDVDogbnVsbCxcbiAgTE9OR19QUkVTU19ERVRFQ1RFRDogbnVsbCxcbn0pO1xuXG50eXBlIFNpZ25hbCA9XG4gIHwgdHlwZW9mIFNpZ25hbHMuREVMQVlcbiAgfCB0eXBlb2YgU2lnbmFscy5SRVNQT05ERVJfR1JBTlRcbiAgfCB0eXBlb2YgU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRVxuICB8IHR5cGVvZiBTaWduYWxzLlJFU1BPTkRFUl9URVJNSU5BVEVEXG4gIHwgdHlwZW9mIFNpZ25hbHMuRU5URVJfUFJFU1NfUkVDVFxuICB8IHR5cGVvZiBTaWduYWxzLkxFQVZFX1BSRVNTX1JFQ1RcbiAgfCB0eXBlb2YgU2lnbmFscy5MT05HX1BSRVNTX0RFVEVDVEVEO1xuXG4vKipcbiAqIE1hcHBpbmcgZnJvbSBTdGF0ZXMgeCBTaWduYWxzID0+IFN0YXRlc1xuICovXG5jb25zdCBUcmFuc2l0aW9ucyA9IHtcbiAgTk9UX1JFU1BPTkRFUjoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5FUlJPUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuRVJST1IsXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLkVSUk9SLFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5FUlJPUixcbiAgfSxcbiAgUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOOiB7XG4gICAgREVMQVk6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19PVVQ6IHtcbiAgICBERUxBWTogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VULFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU46IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU4sXG4gICAgTEVBVkVfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU4sXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfT1VUOiB7XG4gICAgREVMQVk6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfR1JBTlQ6IFN0YXRlcy5FUlJPUixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTjoge1xuICAgIERFTEFZOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX0dSQU5UOiBTdGF0ZXMuRVJST1IsXG4gICAgUkVTUE9OREVSX1JFTEVBU0U6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9URVJNSU5BVEVEOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBFTlRFUl9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfT1VULFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5SRVNQT05ERVJfQUNUSVZFX0xPTkdfUFJFU1NfSU4sXG4gIH0sXG4gIFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVQ6IHtcbiAgICBERUxBWTogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLkVSUk9SLFxuICAgIFJFU1BPTkRFUl9SRUxFQVNFOiBTdGF0ZXMuTk9UX1JFU1BPTkRFUixcbiAgICBSRVNQT05ERVJfVEVSTUlOQVRFRDogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgRU5URVJfUFJFU1NfUkVDVDogU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTixcbiAgICBMRUFWRV9QUkVTU19SRUNUOiBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX09VVCxcbiAgICBMT05HX1BSRVNTX0RFVEVDVEVEOiBTdGF0ZXMuRVJST1IsXG4gIH0sXG4gIGVycm9yOiB7XG4gICAgREVMQVk6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIFJFU1BPTkRFUl9HUkFOVDogU3RhdGVzLlJFU1BPTkRFUl9JTkFDVElWRV9QUkVTU19JTixcbiAgICBSRVNQT05ERVJfUkVMRUFTRTogU3RhdGVzLk5PVF9SRVNQT05ERVIsXG4gICAgUkVTUE9OREVSX1RFUk1JTkFURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIEVOVEVSX1BSRVNTX1JFQ1Q6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIExFQVZFX1BSRVNTX1JFQ1Q6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICAgIExPTkdfUFJFU1NfREVURUNURUQ6IFN0YXRlcy5OT1RfUkVTUE9OREVSLFxuICB9LFxufTtcblxuLy8gPT09PSBUeXBpY2FsIENvbnN0YW50cyBmb3IgaW50ZWdyYXRpbmcgaW50byBVSSBjb21wb25lbnRzID09PT1cbi8vIHZhciBISVRfRVhQQU5EX1BYID0gMjA7XG4vLyB2YXIgSElUX1ZFUlRfT0ZGU0VUX1BYID0gMTA7XG5jb25zdCBISUdITElHSFRfREVMQVlfTVMgPSAxMzA7XG5cbmNvbnN0IFBSRVNTX0VYUEFORF9QWCA9IDIwO1xuXG5jb25zdCBMT05HX1BSRVNTX1RIUkVTSE9MRCA9IDUwMDtcblxuY29uc3QgTE9OR19QUkVTU19ERUxBWV9NUyA9IExPTkdfUFJFU1NfVEhSRVNIT0xEIC0gSElHSExJR0hUX0RFTEFZX01TO1xuXG5jb25zdCBMT05HX1BSRVNTX0FMTE9XRURfTU9WRU1FTlQgPSAxMDtcblxuLy8gRGVmYXVsdCBhbW91bnQgXCJhY3RpdmVcIiByZWdpb24gcHJvdHJ1ZGVzIGJleW9uZCBib3hcblxuLyoqXG4gKiBCeSBjb252ZW50aW9uLCBtZXRob2RzIHByZWZpeGVkIHdpdGggdW5kZXJzY29yZXMgYXJlIG1lYW50IHRvIGJlIEBwcml2YXRlLFxuICogYW5kIG5vdCBAcHJvdGVjdGVkLiBNaXhlcnMgc2hvdWxkbid0IGFjY2VzcyB0aGVtIC0gbm90IGV2ZW4gdG8gcHJvdmlkZSB0aGVtXG4gKiBhcyBjYWxsYmFjayBoYW5kbGVycy5cbiAqXG4gKlxuICogPT09PT09PT09PSBHZW9tZXRyeSA9PT09PT09PT1cbiAqIGBUb3VjaGFibGVgIG9ubHkgYXNzdW1lcyB0aGF0IHRoZXJlIGV4aXN0cyBhIGBIaXRSZWN0YCBub2RlLiBUaGUgYFByZXNzUmVjdGBcbiAqIGlzIGFuIGFic3RyYWN0IGJveCB0aGF0IGlzIGV4dGVuZGVkIGJleW9uZCB0aGUgYEhpdFJlY3RgLlxuICpcbiAqICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgfCAtIFwiU3RhcnRcIiBldmVudHMgaW4gYEhpdFJlY3RgIGNhdXNlIGBIaXRSZWN0YFxuICogIHwgICstLS0tLS0tLS0tLS0tLS0tLS0tLSsgIHwgICB0byBiZWNvbWUgdGhlIHJlc3BvbmRlci5cbiAqICB8ICB8ICArLS0tLS0tLS0tLS0tLS0rICB8ICB8IC0gYEhpdFJlY3RgIGlzIHR5cGljYWxseSBleHBhbmRlZCBhcm91bmRcbiAqICB8ICB8ICB8ICAgICAgICAgICAgICB8ICB8ICB8ICAgdGhlIGBWaXN1YWxSZWN0YCwgYnV0IHNoaWZ0ZWQgZG93bndhcmQuXG4gKiAgfCAgfCAgfCAgVmlzdWFsUmVjdCAgfCAgfCAgfCAtIEFmdGVyIHByZXNzaW5nIGRvd24sIGFmdGVyIHNvbWUgZGVsYXksXG4gKiAgfCAgfCAgfCAgICAgICAgICAgICAgfCAgfCAgfCAgIGFuZCBiZWZvcmUgbGV0dGluZyB1cCwgdGhlIFZpc3VhbCBSZWFjdFxuICogIHwgIHwgICstLS0tLS0tLS0tLS0tLSsgIHwgIHwgICB3aWxsIGJlY29tZSBcImFjdGl2ZVwiLiBUaGlzIG1ha2VzIGl0IGVsaWdpYmxlXG4gKiAgfCAgfCAgICAgSGl0UmVjdCAgICAgICAgfCAgfCAgIGZvciBiZWluZyBoaWdobGlnaHRlZCAoc28gbG9uZyBhcyB0aGVcbiAqICB8ICArLS0tLS0tLS0tLS0tLS0tLS0tLS0rICB8ICAgcHJlc3MgcmVtYWlucyBpbiB0aGUgYFByZXNzUmVjdGApLlxuICogIHwgICAgICAgIFByZXNzUmVjdCAgICAgbyAgIHxcbiAqICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwtLS0rXG4gKiAgICAgICAgICAgT3V0IFJlZ2lvbiAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0rIFRoaXMgZ2FwIGJldHdlZW4gdGhlIGBIaXRSZWN0YCBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFByZXNzUmVjdGAgYWxsb3dzIGEgdG91Y2ggdG8gbW92ZSBmYXIgYXdheVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tIHRoZSBvcmlnaW5hbCBoaXQgcmVjdCwgYW5kIHJlbWFpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRlZCwgYW5kIGVsaWdpYmxlIGZvciBhIFwiUHJlc3NcIi5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3VzdG9taXplIHRoaXMgdmlhXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQoKWAuXG4gKlxuICpcbiAqXG4gKiA9PT09PT09IFN0YXRlIE1hY2hpbmUgPT09PT09PVxuICpcbiAqICstLS0tLS0tLS0tLS0tKyA8LS0tKyBSRVNQT05ERVJfUkVMRUFTRVxuICogfE5PVF9SRVNQT05ERVJ8XG4gKiArLS0tLS0tLS0tLS0tLSsgPC0tLSsgUkVTUE9OREVSX1RFUk1JTkFURURcbiAqICAgICArXG4gKiAgICAgfCBSRVNQT05ERVJfR1JBTlQgKEhpdFJlY3QpXG4gKiAgICAgdlxuICogKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgIERFTEFZICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICBUICsgREVMQVkgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiB8UkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOfCstLS0tLS0tLT58UkVTUE9OREVSX0FDVElWRV9QUkVTU19JTnwgKy0tLS0tLS0tLS0tLT4gfFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTnxcbiAqICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKyAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICogICAgICsgICAgICAgICAgICBeICAgICAgICAgICAgICAgICAgICAgICAgICsgICAgICAgICAgIF4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArICAgICAgICAgICBeXG4gKiAgICAgfExFQVZFXyAgICAgIHxFTlRFUl8gICAgICAgICAgICAgICAgICAgfExFQVZFXyAgICAgfEVOVEVSXyAgICAgICAgICAgICAgICAgICAgICAgICAgIHxMRUFWRV8gICAgIHxFTlRFUl9cbiAqICAgICB8UFJFU1NfUkVDVCAgfFBSRVNTX1JFQ1QgICAgICAgICAgICAgICB8UFJFU1NfUkVDVCB8UFJFU1NfUkVDVCAgICAgICAgICAgICAgICAgICAgICAgfFBSRVNTX1JFQ1QgfFBSRVNTX1JFQ1RcbiAqICAgICB8ICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgfFxuICogICAgIHYgICAgICAgICAgICArICAgICAgICAgICAgICAgICAgICAgICAgIHYgICAgICAgICAgICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICAgICAgICAgICArXG4gKiArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgIERFTEFZICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKiB8UkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX09VVHwrLS0tLS0tLT58UkVTUE9OREVSX0FDVElWRV9QUkVTU19PVVR8ICAgICAgICAgICAgICAgfFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19PVVR8XG4gKiArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgICAgICAgICArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rXG4gKlxuICogVCArIERFTEFZID0+IExPTkdfUFJFU1NfREVMQVlfTVMgKyBERUxBWVxuICpcbiAqIE5vdCBkcmF3biBhcmUgdGhlIHNpZGUgZWZmZWN0cyBvZiBlYWNoIHRyYW5zaXRpb24uIFRoZSBtb3N0IGltcG9ydGFudCBzaWRlXG4gKiBlZmZlY3QgaXMgdGhlIGB0b3VjaGFibGVIYW5kbGVQcmVzc2AgYWJzdHJhY3QgbWV0aG9kIGludm9jYXRpb24gdGhhdCBvY2N1cnNcbiAqIHdoZW4gYSByZXNwb25kZXIgaXMgcmVsZWFzZWQgd2hpbGUgaW4gZWl0aGVyIG9mIHRoZSBcIlByZXNzXCIgc3RhdGVzLlxuICpcbiAqIFRoZSBvdGhlciBpbXBvcnRhbnQgc2lkZSBlZmZlY3RzIGFyZSB0aGUgaGlnaGxpZ2h0IGFic3RyYWN0IG1ldGhvZFxuICogaW52b2NhdGlvbnMgKGludGVybmFsIGNhbGxiYWNrcykgdG8gYmUgaW1wbGVtZW50ZWQgYnkgdGhlIG1peGVyLlxuICpcbiAqXG4gKiBAbGVuZHMgVG91Y2hhYmxlLnByb3RvdHlwZVxuICovXG5jb25zdCBUb3VjaGFibGVNaXhpbiA9IHtcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghUGxhdGZvcm0uaXNUVikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3R2RXZlbnRIYW5kbGVyID0gbmV3IFRWRXZlbnRIYW5kbGVyKCk7XG4gICAgdGhpcy5fdHZFdmVudEhhbmRsZXIuZW5hYmxlKHRoaXMsIGZ1bmN0aW9uKGNtcCwgZXZ0KSB7XG4gICAgICBjb25zdCBteVRhZyA9IFJlYWN0TmF0aXZlLmZpbmROb2RlSGFuZGxlKGNtcCk7XG4gICAgICBldnQuZGlzcGF0Y2hDb25maWcgPSB7fTtcbiAgICAgIGlmIChteVRhZyA9PT0gZXZ0LnRhZykge1xuICAgICAgICBpZiAoZXZ0LmV2ZW50VHlwZSA9PT0gJ2ZvY3VzJykge1xuICAgICAgICAgIGNtcC50b3VjaGFibGVIYW5kbGVGb2N1cyhldnQpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2dC5ldmVudFR5cGUgPT09ICdibHVyJykge1xuICAgICAgICAgIGNtcC50b3VjaGFibGVIYW5kbGVCbHVyKGV2dCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXZ0LmV2ZW50VHlwZSA9PT0gJ3NlbGVjdCcpIHtcbiAgICAgICAgICBjbXAudG91Y2hhYmxlSGFuZGxlUHJlc3MgJiZcbiAgICAgICAgICAgICFjbXAucHJvcHMuZGlzYWJsZWQgJiZcbiAgICAgICAgICAgIGNtcC50b3VjaGFibGVIYW5kbGVQcmVzcyhldnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCB0aW1lb3V0cyBvbiB1bm1vdW50XG4gICAqL1xuICBjb21wb25lbnRXaWxsVW5tb3VudDogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3R2RXZlbnRIYW5kbGVyKSB7XG4gICAgICB0aGlzLl90dkV2ZW50SGFuZGxlci5kaXNhYmxlKCk7XG4gICAgICBkZWxldGUgdGhpcy5fdHZFdmVudEhhbmRsZXI7XG4gICAgfVxuICAgIHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCk7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0KTtcbiAgfSxcblxuICAvKipcbiAgICogSXQncyBwcmVmZXIgdGhhdCBtaXhpbnMgZGV0ZXJtaW5lIHN0YXRlIGluIHRoaXMgd2F5LCBoYXZpbmcgdGhlIGNsYXNzXG4gICAqIGV4cGxpY2l0bHkgbWl4IHRoZSBzdGF0ZSBpbiB0aGUgb25lIGFuZCBvbmx5IGBnZXRJbml0aWFsU3RhdGVgIG1ldGhvZC5cbiAgICpcbiAgICogQHJldHVybiB7b2JqZWN0fSBTdGF0ZSBvYmplY3QgdG8gYmUgcGxhY2VkIGluc2lkZSBvZlxuICAgKiBgdGhpcy5zdGF0ZS50b3VjaGFibGVgLlxuICAgKi9cbiAgdG91Y2hhYmxlR2V0SW5pdGlhbFN0YXRlOiBmdW5jdGlvbigpOiAkVEVNUE9SQVJZJG9iamVjdDx7fFxuICAgIHRvdWNoYWJsZTogJFRFTVBPUkFSWSRvYmplY3Q8e3xyZXNwb25kZXJJRDogbnVsbCwgdG91Y2hTdGF0ZTogdm9pZHx9PixcbiAgfH0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgdG91Y2hhYmxlOiB7dG91Y2hTdGF0ZTogdW5kZWZpbmVkLCByZXNwb25kZXJJRDogbnVsbH0sXG4gICAgfTtcbiAgfSxcblxuICAvLyA9PT09IEhvb2tzIHRvIEdlc3R1cmUgUmVzcG9uZGVyIHN5c3RlbSA9PT09XG4gIC8qKlxuICAgKiBNdXN0IHJldHVybiB0cnVlIGlmIGVtYmVkZGVkIGluIGEgbmF0aXZlIHBsYXRmb3JtIHNjcm9sbCB2aWV3LlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0OiBmdW5jdGlvbigpOiBhbnkge1xuICAgIHJldHVybiAhdGhpcy5wcm9wcy5yZWplY3RSZXNwb25kZXJUZXJtaW5hdGlvbjtcbiAgfSxcblxuICAvKipcbiAgICogTXVzdCByZXR1cm4gdHJ1ZSB0byBzdGFydCB0aGUgcHJvY2VzcyBvZiBgVG91Y2hhYmxlYC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyOiBmdW5jdGlvbigpOiBhbnkge1xuICAgIHJldHVybiAhdGhpcy5wcm9wcy5kaXNhYmxlZDtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJuIHRydWUgdG8gY2FuY2VsIHByZXNzIG9uIGxvbmcgcHJlc3MuXG4gICAqL1xuICB0b3VjaGFibGVMb25nUHJlc3NDYW5jZWxzUHJlc3M6IGZ1bmN0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQbGFjZSBhcyBjYWxsYmFjayBmb3IgYSBET00gZWxlbWVudCdzIGBvblJlc3BvbmRlckdyYW50YCBldmVudC5cbiAgICogQHBhcmFtIHtTeW50aGV0aWNFdmVudH0gZSBTeW50aGV0aWMgZXZlbnQgZnJvbSBldmVudCBzeXN0ZW0uXG4gICAqXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJHcmFudDogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIGNvbnN0IGRpc3BhdGNoSUQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgLy8gU2luY2UgZSBpcyB1c2VkIGluIGEgY2FsbGJhY2sgaW52b2tlZCBvbiBhbm90aGVyIGV2ZW50IGxvb3BcbiAgICAvLyAoYXMgaW4gc2V0VGltZW91dCBldGMpLCB3ZSBuZWVkIHRvIGNhbGwgZS5wZXJzaXN0KCkgb24gdGhlXG4gICAgLy8gZXZlbnQgdG8gbWFrZSBzdXJlIGl0IGRvZXNuJ3QgZ2V0IHJldXNlZCBpbiB0aGUgZXZlbnQgb2JqZWN0IHBvb2wuXG4gICAgZS5wZXJzaXN0KCk7XG5cbiAgICB0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0KTtcbiAgICB0aGlzLnByZXNzT3V0RGVsYXlUaW1lb3V0ID0gbnVsbDtcblxuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGUgPSBTdGF0ZXMuTk9UX1JFU1BPTkRFUjtcbiAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS5yZXNwb25kZXJJRCA9IGRpc3BhdGNoSUQ7XG4gICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLlJFU1BPTkRFUl9HUkFOVCwgZSk7XG4gICAgbGV0IGRlbGF5TVMgPVxuICAgICAgdGhpcy50b3VjaGFibGVHZXRIaWdobGlnaHREZWxheU1TICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBNYXRoLm1heCh0aGlzLnRvdWNoYWJsZUdldEhpZ2hsaWdodERlbGF5TVMoKSwgMClcbiAgICAgICAgOiBISUdITElHSFRfREVMQVlfTVM7XG4gICAgZGVsYXlNUyA9IGlzTmFOKGRlbGF5TVMpID8gSElHSExJR0hUX0RFTEFZX01TIDogZGVsYXlNUztcbiAgICBpZiAoZGVsYXlNUyAhPT0gMCkge1xuICAgICAgdGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KFxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxheS5iaW5kKHRoaXMsIGUpLFxuICAgICAgICBkZWxheU1TLFxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGFuZGxlRGVsYXkoZSk7XG4gICAgfVxuXG4gICAgbGV0IGxvbmdEZWxheU1TID1cbiAgICAgIHRoaXMudG91Y2hhYmxlR2V0TG9uZ1ByZXNzRGVsYXlNUyAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gTWF0aC5tYXgodGhpcy50b3VjaGFibGVHZXRMb25nUHJlc3NEZWxheU1TKCksIDEwKVxuICAgICAgICA6IExPTkdfUFJFU1NfREVMQVlfTVM7XG4gICAgbG9uZ0RlbGF5TVMgPSBpc05hTihsb25nRGVsYXlNUykgPyBMT05HX1BSRVNTX0RFTEFZX01TIDogbG9uZ0RlbGF5TVM7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KFxuICAgICAgdGhpcy5faGFuZGxlTG9uZ0RlbGF5LmJpbmQodGhpcywgZSksXG4gICAgICBsb25nRGVsYXlNUyArIGRlbGF5TVMsXG4gICAgKTtcbiAgfSxcblxuICAvKipcbiAgICogUGxhY2UgYXMgY2FsbGJhY2sgZm9yIGEgRE9NIGVsZW1lbnQncyBgb25SZXNwb25kZXJSZWxlYXNlYCBldmVudC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZVJlc3BvbmRlclJlbGVhc2U6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLnByZXNzSW5Mb2NhdGlvbiA9IG51bGw7XG4gICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLlJFU1BPTkRFUl9SRUxFQVNFLCBlKTtcbiAgfSxcblxuICAvKipcbiAgICogUGxhY2UgYXMgY2FsbGJhY2sgZm9yIGEgRE9NIGVsZW1lbnQncyBgb25SZXNwb25kZXJUZXJtaW5hdGVgIGV2ZW50LlxuICAgKi9cbiAgdG91Y2hhYmxlSGFuZGxlUmVzcG9uZGVyVGVybWluYXRlOiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy5wcmVzc0luTG9jYXRpb24gPSBudWxsO1xuICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5SRVNQT05ERVJfVEVSTUlOQVRFRCwgZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFBsYWNlIGFzIGNhbGxiYWNrIGZvciBhIERPTSBlbGVtZW50J3MgYG9uUmVzcG9uZGVyTW92ZWAgZXZlbnQuXG4gICAqL1xuICB0b3VjaGFibGVIYW5kbGVSZXNwb25kZXJNb3ZlOiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgLy8gTWVhc3VyZW1lbnQgbWF5IG5vdCBoYXZlIHJldHVybmVkIHlldC5cbiAgICBpZiAoIXRoaXMuc3RhdGUudG91Y2hhYmxlLnBvc2l0aW9uT25BY3RpdmF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBvc2l0aW9uT25BY3RpdmF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnBvc2l0aW9uT25BY3RpdmF0ZTtcbiAgICBjb25zdCBkaW1lbnNpb25zT25BY3RpdmF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLmRpbWVuc2lvbnNPbkFjdGl2YXRlO1xuICAgIGNvbnN0IHByZXNzUmVjdE9mZnNldCA9IHRoaXMudG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0XG4gICAgICA/IHRoaXMudG91Y2hhYmxlR2V0UHJlc3NSZWN0T2Zmc2V0KClcbiAgICAgIDoge1xuICAgICAgICAgIGxlZnQ6IFBSRVNTX0VYUEFORF9QWCxcbiAgICAgICAgICByaWdodDogUFJFU1NfRVhQQU5EX1BYLFxuICAgICAgICAgIHRvcDogUFJFU1NfRVhQQU5EX1BYLFxuICAgICAgICAgIGJvdHRvbTogUFJFU1NfRVhQQU5EX1BYLFxuICAgICAgICB9O1xuXG4gICAgbGV0IHByZXNzRXhwYW5kTGVmdCA9IHByZXNzUmVjdE9mZnNldC5sZWZ0O1xuICAgIGxldCBwcmVzc0V4cGFuZFRvcCA9IHByZXNzUmVjdE9mZnNldC50b3A7XG4gICAgbGV0IHByZXNzRXhwYW5kUmlnaHQgPSBwcmVzc1JlY3RPZmZzZXQucmlnaHQ7XG4gICAgbGV0IHByZXNzRXhwYW5kQm90dG9tID0gcHJlc3NSZWN0T2Zmc2V0LmJvdHRvbTtcblxuICAgIGNvbnN0IGhpdFNsb3AgPSB0aGlzLnRvdWNoYWJsZUdldEhpdFNsb3BcbiAgICAgID8gdGhpcy50b3VjaGFibGVHZXRIaXRTbG9wKClcbiAgICAgIDogbnVsbDtcblxuICAgIGlmIChoaXRTbG9wKSB7XG4gICAgICBwcmVzc0V4cGFuZExlZnQgKz0gaGl0U2xvcC5sZWZ0IHx8IDA7XG4gICAgICBwcmVzc0V4cGFuZFRvcCArPSBoaXRTbG9wLnRvcCB8fCAwO1xuICAgICAgcHJlc3NFeHBhbmRSaWdodCArPSBoaXRTbG9wLnJpZ2h0IHx8IDA7XG4gICAgICBwcmVzc0V4cGFuZEJvdHRvbSArPSBoaXRTbG9wLmJvdHRvbSB8fCAwO1xuICAgIH1cblxuICAgIGNvbnN0IHRvdWNoID0gZXh0cmFjdFNpbmdsZVRvdWNoKGUubmF0aXZlRXZlbnQpO1xuICAgIGNvbnN0IHBhZ2VYID0gdG91Y2ggJiYgdG91Y2gucGFnZVg7XG4gICAgY29uc3QgcGFnZVkgPSB0b3VjaCAmJiB0b3VjaC5wYWdlWTtcblxuICAgIGlmICh0aGlzLnByZXNzSW5Mb2NhdGlvbikge1xuICAgICAgY29uc3QgbW92ZWREaXN0YW5jZSA9IHRoaXMuX2dldERpc3RhbmNlQmV0d2VlblBvaW50cyhcbiAgICAgICAgcGFnZVgsXG4gICAgICAgIHBhZ2VZLFxuICAgICAgICB0aGlzLnByZXNzSW5Mb2NhdGlvbi5wYWdlWCxcbiAgICAgICAgdGhpcy5wcmVzc0luTG9jYXRpb24ucGFnZVksXG4gICAgICApO1xuICAgICAgaWYgKG1vdmVkRGlzdGFuY2UgPiBMT05HX1BSRVNTX0FMTE9XRURfTU9WRU1FTlQpIHtcbiAgICAgICAgdGhpcy5fY2FuY2VsTG9uZ1ByZXNzRGVsYXlUaW1lb3V0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaXNUb3VjaFdpdGhpbkFjdGl2ZSA9XG4gICAgICBwYWdlWCA+IHBvc2l0aW9uT25BY3RpdmF0ZS5sZWZ0IC0gcHJlc3NFeHBhbmRMZWZ0ICYmXG4gICAgICBwYWdlWSA+IHBvc2l0aW9uT25BY3RpdmF0ZS50b3AgLSBwcmVzc0V4cGFuZFRvcCAmJlxuICAgICAgcGFnZVggPFxuICAgICAgICBwb3NpdGlvbk9uQWN0aXZhdGUubGVmdCArXG4gICAgICAgICAgZGltZW5zaW9uc09uQWN0aXZhdGUud2lkdGggK1xuICAgICAgICAgIHByZXNzRXhwYW5kUmlnaHQgJiZcbiAgICAgIHBhZ2VZIDxcbiAgICAgICAgcG9zaXRpb25PbkFjdGl2YXRlLnRvcCArXG4gICAgICAgICAgZGltZW5zaW9uc09uQWN0aXZhdGUuaGVpZ2h0ICtcbiAgICAgICAgICBwcmVzc0V4cGFuZEJvdHRvbTtcbiAgICBpZiAoaXNUb3VjaFdpdGhpbkFjdGl2ZSkge1xuICAgICAgY29uc3QgcHJldlN0YXRlID0gdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZTtcbiAgICAgIHRoaXMuX3JlY2VpdmVTaWduYWwoU2lnbmFscy5FTlRFUl9QUkVTU19SRUNULCBlKTtcbiAgICAgIGNvbnN0IGN1clN0YXRlID0gdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZTtcbiAgICAgIGlmIChcbiAgICAgICAgY3VyU3RhdGUgPT09IFN0YXRlcy5SRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU4gJiZcbiAgICAgICAgcHJldlN0YXRlICE9PSBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOXG4gICAgICApIHtcbiAgICAgICAgLy8gZml4IGZvciB0Nzk2NzQyMFxuICAgICAgICB0aGlzLl9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2FuY2VsTG9uZ1ByZXNzRGVsYXlUaW1lb3V0KCk7XG4gICAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuTEVBVkVfUFJFU1NfUkVDVCwgZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGl0ZW0gcmVjZWl2ZXMgZm9jdXMuIE1peGVycyBtaWdodCBvdmVycmlkZSB0aGlzIHRvXG4gICAqIHZpc3VhbGx5IGRpc3Rpbmd1aXNoIHRoZSBgVmlzdWFsUmVjdGAgc28gdGhhdCB0aGUgdXNlciBrbm93cyB0aGF0IGl0XG4gICAqIGN1cnJlbnRseSBoYXMgdGhlIGZvY3VzLiBNb3N0IHBsYXRmb3JtcyBvbmx5IHN1cHBvcnQgYSBzaW5nbGUgZWxlbWVudCBiZWluZ1xuICAgKiBmb2N1c2VkIGF0IGEgdGltZSwgaW4gd2hpY2ggY2FzZSB0aGVyZSBtYXkgaGF2ZSBiZWVuIGEgcHJldmlvdXNseSBmb2N1c2VkXG4gICAqIGVsZW1lbnQgdGhhdCB3YXMgYmx1cnJlZCBqdXN0IHByaW9yIHRvIHRoaXMuIFRoaXMgY2FuIGJlIG92ZXJyaWRkZW4gd2hlblxuICAgKiB1c2luZyBgVG91Y2hhYmxlLk1peGluLndpdGhvdXREZWZhdWx0Rm9jdXNBbmRCbHVyYC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZUZvY3VzOiBmdW5jdGlvbihlOiBFdmVudCkge1xuICAgIHRoaXMucHJvcHMub25Gb2N1cyAmJiB0aGlzLnByb3BzLm9uRm9jdXMoZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgaXRlbSBsb3NlcyBmb2N1cy4gTWl4ZXJzIG1pZ2h0IG92ZXJyaWRlIHRoaXMgdG9cbiAgICogdmlzdWFsbHkgZGlzdGluZ3Vpc2ggdGhlIGBWaXN1YWxSZWN0YCBzbyB0aGF0IHRoZSB1c2VyIGtub3dzIHRoYXQgaXRcbiAgICogbm8gbG9uZ2VyIGhhcyBmb2N1cy4gTW9zdCBwbGF0Zm9ybXMgb25seSBzdXBwb3J0IGEgc2luZ2xlIGVsZW1lbnQgYmVpbmdcbiAgICogZm9jdXNlZCBhdCBhIHRpbWUsIGluIHdoaWNoIGNhc2UgdGhlIGZvY3VzIG1heSBoYXZlIG1vdmVkIHRvIGFub3RoZXIuXG4gICAqIFRoaXMgY2FuIGJlIG92ZXJyaWRkZW4gd2hlbiB1c2luZ1xuICAgKiBgVG91Y2hhYmxlLk1peGluLndpdGhvdXREZWZhdWx0Rm9jdXNBbmRCbHVyYC5cbiAgICovXG4gIHRvdWNoYWJsZUhhbmRsZUJsdXI6IGZ1bmN0aW9uKGU6IEV2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vbkJsdXIgJiYgdGhpcy5wcm9wcy5vbkJsdXIoZSk7XG4gIH0sXG5cbiAgLy8gPT09PSBBYnN0cmFjdCBBcHBsaWNhdGlvbiBDYWxsYmFja3MgPT09PVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGl0ZW0gc2hvdWxkIGJlIGhpZ2hsaWdodGVkLiBNaXhlcnMgc2hvdWxkIGltcGxlbWVudCB0aGlzXG4gICAqIHRvIHZpc3VhbGx5IGRpc3Rpbmd1aXNoIHRoZSBgVmlzdWFsUmVjdGAgc28gdGhhdCB0aGUgdXNlciBrbm93cyB0aGF0XG4gICAqIHJlbGVhc2luZyBhIHRvdWNoIHdpbGwgcmVzdWx0IGluIGEgXCJzZWxlY3Rpb25cIiAoYW5hbG9nIHRvIGNsaWNrKS5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW46IGZ1bmN0aW9uLFxuICAgKi9cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIGlzIFwiYWN0aXZlXCIgKGluIHRoYXQgaXQgaXMgc3RpbGwgZWxpZ2libGUgdG8gYmVjb21lXG4gICAqIGEgXCJzZWxlY3RcIikgYnV0IHRoZSB0b3VjaCBoYXMgbGVmdCB0aGUgYFByZXNzUmVjdGAuIFVzdWFsbHkgdGhlIG1peGVyIHdpbGxcbiAgICogd2FudCB0byB1bmhpZ2hsaWdodCB0aGUgYFZpc3VhbFJlY3RgLiBJZiB0aGUgdXNlciAod2hpbGUgcHJlc3NpbmcpIG1vdmVzXG4gICAqIGJhY2sgaW50byB0aGUgYFByZXNzUmVjdGAgYHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzSW5gIHdpbGwgYmUgaW52b2tlZFxuICAgKiBhZ2FpbiBhbmQgdGhlIG1peGVyIHNob3VsZCBwcm9iYWJseSBoaWdobGlnaHQgdGhlIGBWaXN1YWxSZWN0YCBhZ2Fpbi4gVGhpc1xuICAgKiBldmVudCB3aWxsIG5vdCBmaXJlIG9uIGFuIGB0b3VjaEVuZC9tb3VzZVVwYCBldmVudCwgb25seSBtb3ZlIGV2ZW50cyB3aGlsZVxuICAgKiB0aGUgdXNlciBpcyBkZXByZXNzaW5nIHRoZSBtb3VzZS90b3VjaC5cbiAgICpcbiAgICogQGFic3RyYWN0XG4gICAqIHRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0OiBmdW5jdGlvblxuICAgKi9cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBpdGVtIGlzIFwic2VsZWN0ZWRcIiAtIG1lYW5pbmcgdGhlIGludGVyYWN0aW9uIGVuZGVkIGJ5XG4gICAqIGxldHRpbmcgdXAgd2hpbGUgdGhlIGl0ZW0gd2FzIGVpdGhlciBpbiB0aGUgc3RhdGVcbiAgICogYFJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU5gIG9yIGBSRVNQT05ERVJfSU5BQ1RJVkVfUFJFU1NfSU5gLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogdG91Y2hhYmxlSGFuZGxlUHJlc3M6IGZ1bmN0aW9uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGl0ZW0gaXMgbG9uZyBwcmVzc2VkIC0gbWVhbmluZyB0aGUgaW50ZXJhY3Rpb24gZW5kZWQgYnlcbiAgICogbGV0dGluZyB1cCB3aGlsZSB0aGUgaXRlbSB3YXMgaW4gYFJFU1BPTkRFUl9BQ1RJVkVfTE9OR19QUkVTU19JTmAuIElmXG4gICAqIGB0b3VjaGFibGVIYW5kbGVMb25nUHJlc3NgIGlzICpub3QqIHByb3ZpZGVkLCBgdG91Y2hhYmxlSGFuZGxlUHJlc3NgIHdpbGxcbiAgICogYmUgY2FsbGVkIGFzIGl0IG5vcm1hbGx5IGlzLiBJZiBgdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzYCBpcyBwcm92aWRlZCwgYnlcbiAgICogZGVmYXVsdCBhbnkgYHRvdWNoYWJsZUhhbmRsZVByZXNzYCBjYWxsYmFjayB3aWxsIG5vdCBiZSBpbnZva2VkLiBUb1xuICAgKiBvdmVycmlkZSB0aGlzIGRlZmF1bHQgYmVoYXZpb3IsIG92ZXJyaWRlIGB0b3VjaGFibGVMb25nUHJlc3NDYW5jZWxzUHJlc3NgXG4gICAqIHRvIHJldHVybiBmYWxzZS4gQXMgYSByZXN1bHQsIGB0b3VjaGFibGVIYW5kbGVQcmVzc2Agd2lsbCBiZSBjYWxsZWQgd2hlblxuICAgKiBsaWZ0aW5nIHVwLCBldmVuIGlmIGB0b3VjaGFibGVIYW5kbGVMb25nUHJlc3NgIGhhcyBhbHNvIGJlZW4gY2FsbGVkLlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogdG91Y2hhYmxlSGFuZGxlTG9uZ1ByZXNzOiBmdW5jdGlvblxuICAgKi9cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIG1pbGxpcyB0byB3YWl0IGJlZm9yZSB0cmlnZ2VyaW5nIGEgaGlnaGxpZ2h0LlxuICAgKlxuICAgKiBAYWJzdHJhY3RcbiAgICogdG91Y2hhYmxlR2V0SGlnaGxpZ2h0RGVsYXlNUzogZnVuY3Rpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGFtb3VudCB0byBleHRlbmQgdGhlIGBIaXRSZWN0YCBpbnRvIHRoZSBgUHJlc3NSZWN0YC4gUG9zaXRpdmVcbiAgICogbnVtYmVycyBtZWFuIHRoZSBzaXplIGV4cGFuZHMgb3V0d2FyZHMuXG4gICAqXG4gICAqIEBhYnN0cmFjdFxuICAgKiB0b3VjaGFibGVHZXRQcmVzc1JlY3RPZmZzZXQ6IGZ1bmN0aW9uXG4gICAqL1xuXG4gIC8vID09PT0gSW50ZXJuYWwgTG9naWMgPT09PVxuXG4gIC8qKlxuICAgKiBNZWFzdXJlcyB0aGUgYEhpdFJlY3RgIG5vZGUgb24gYWN0aXZhdGlvbi4gVGhlIEJvdW5kaW5nIHJlY3RhbmdsZSBpcyB3aXRoXG4gICAqIHJlc3BlY3QgdG8gdmlld3BvcnQgLSBub3QgcGFnZSwgc28gYWRkaW5nIHRoZSBgcGFnZVhPZmZzZXQvcGFnZVlPZmZzZXRgXG4gICAqIHNob3VsZCByZXN1bHQgaW4gcG9pbnRzIHRoYXQgYXJlIGluIHRoZSBzYW1lIGNvb3JkaW5hdGUgc3lzdGVtIGFzIGFuXG4gICAqIGV2ZW50J3MgYGdsb2JhbFgvZ2xvYmFsWWAgZGF0YSB2YWx1ZXMuXG4gICAqXG4gICAqIC0gQ29uc2lkZXIgY2FjaGluZyB0aGlzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIGNvbXBvbmVudCwgb3IgcG9zc2libHlcbiAgICogICBiZWluZyBhYmxlIHRvIHNoYXJlIHRoaXMgY2FjaGUgYmV0d2VlbiBhbnkgYFNjcm9sbE1hcGAgdmlldy5cbiAgICpcbiAgICogQHNpZGVlZmZlY3RzXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVtZWFzdXJlTWV0cmljc09uQWN0aXZhdGlvbjogZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdGFnID0gdGhpcy5zdGF0ZS50b3VjaGFibGUucmVzcG9uZGVySUQ7XG4gICAgaWYgKHRhZyA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgVUlNYW5hZ2VyLm1lYXN1cmUodGFnLCB0aGlzLl9oYW5kbGVRdWVyeUxheW91dCk7XG4gIH0sXG5cbiAgX2hhbmRsZVF1ZXJ5TGF5b3V0OiBmdW5jdGlvbihcbiAgICBsOiBudW1iZXIsXG4gICAgdDogbnVtYmVyLFxuICAgIHc6IG51bWJlcixcbiAgICBoOiBudW1iZXIsXG4gICAgZ2xvYmFsWDogbnVtYmVyLFxuICAgIGdsb2JhbFk6IG51bWJlcixcbiAgKSB7XG4gICAgLy9kb24ndCBkbyBhbnl0aGluZyBVSU1hbmFnZXIgZmFpbGVkIHRvIG1lYXN1cmUgbm9kZVxuICAgIGlmICghbCAmJiAhdCAmJiAhdyAmJiAhaCAmJiAhZ2xvYmFsWCAmJiAhZ2xvYmFsWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS5wb3NpdGlvbk9uQWN0aXZhdGUgJiZcbiAgICAgIFBvc2l0aW9uLnJlbGVhc2UodGhpcy5zdGF0ZS50b3VjaGFibGUucG9zaXRpb25PbkFjdGl2YXRlKTtcbiAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS5kaW1lbnNpb25zT25BY3RpdmF0ZSAmJlxuICAgICAgQm91bmRpbmdEaW1lbnNpb25zLnJlbGVhc2UodGhpcy5zdGF0ZS50b3VjaGFibGUuZGltZW5zaW9uc09uQWN0aXZhdGUpO1xuICAgIHRoaXMuc3RhdGUudG91Y2hhYmxlLnBvc2l0aW9uT25BY3RpdmF0ZSA9IFBvc2l0aW9uLmdldFBvb2xlZChcbiAgICAgIGdsb2JhbFgsXG4gICAgICBnbG9iYWxZLFxuICAgICk7XG4gICAgdGhpcy5zdGF0ZS50b3VjaGFibGUuZGltZW5zaW9uc09uQWN0aXZhdGUgPSBCb3VuZGluZ0RpbWVuc2lvbnMuZ2V0UG9vbGVkKFxuICAgICAgdyxcbiAgICAgIGgsXG4gICAgKTtcbiAgfSxcblxuICBfaGFuZGxlRGVsYXk6IGZ1bmN0aW9uKGU6IFByZXNzRXZlbnQpIHtcbiAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCA9IG51bGw7XG4gICAgdGhpcy5fcmVjZWl2ZVNpZ25hbChTaWduYWxzLkRFTEFZLCBlKTtcbiAgfSxcblxuICBfaGFuZGxlTG9uZ0RlbGF5OiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgdGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQgPSBudWxsO1xuICAgIGNvbnN0IGN1clN0YXRlID0gdGhpcy5zdGF0ZS50b3VjaGFibGUudG91Y2hTdGF0ZTtcbiAgICBpZiAoXG4gICAgICBjdXJTdGF0ZSAhPT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU4gJiZcbiAgICAgIGN1clN0YXRlICE9PSBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAnQXR0ZW1wdGVkIHRvIHRyYW5zaXRpb24gZnJvbSBzdGF0ZSBgJyArXG4gICAgICAgICAgY3VyU3RhdGUgK1xuICAgICAgICAgICdgIHRvIGAnICtcbiAgICAgICAgICBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOICtcbiAgICAgICAgICAnYCwgd2hpY2ggaXMgbm90IHN1cHBvcnRlZC4gVGhpcyBpcyAnICtcbiAgICAgICAgICAnbW9zdCBsaWtlbHkgZHVlIHRvIGBUb3VjaGFibGUubG9uZ1ByZXNzRGVsYXlUaW1lb3V0YCBub3QgYmVpbmcgY2FuY2VsbGVkLicsXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZWNlaXZlU2lnbmFsKFNpZ25hbHMuTE9OR19QUkVTU19ERVRFQ1RFRCwgZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZWNlaXZlcyBhIHN0YXRlIG1hY2hpbmUgc2lnbmFsLCBwZXJmb3JtcyBzaWRlIGVmZmVjdHMgb2YgdGhlIHRyYW5zaXRpb25cbiAgICogYW5kIHN0b3JlcyB0aGUgbmV3IHN0YXRlLiBWYWxpZGF0ZXMgdGhlIHRyYW5zaXRpb24gYXMgd2VsbC5cbiAgICpcbiAgICogQHBhcmFtIHtTaWduYWxzfSBzaWduYWwgU3RhdGUgbWFjaGluZSBzaWduYWwuXG4gICAqIEB0aHJvd3MgRXJyb3IgaWYgaW52YWxpZCBzdGF0ZSB0cmFuc2l0aW9uIG9yIHVucmVjb2duaXplZCBzaWduYWwuXG4gICAqIEBzaWRlZWZmZWN0c1xuICAgKi9cbiAgX3JlY2VpdmVTaWduYWw6IGZ1bmN0aW9uKHNpZ25hbDogU2lnbmFsLCBlOiBQcmVzc0V2ZW50KSB7XG4gICAgY29uc3QgcmVzcG9uZGVySUQgPSB0aGlzLnN0YXRlLnRvdWNoYWJsZS5yZXNwb25kZXJJRDtcbiAgICBjb25zdCBjdXJTdGF0ZSA9IHRoaXMuc3RhdGUudG91Y2hhYmxlLnRvdWNoU3RhdGU7XG4gICAgY29uc3QgbmV4dFN0YXRlID0gVHJhbnNpdGlvbnNbY3VyU3RhdGVdICYmIFRyYW5zaXRpb25zW2N1clN0YXRlXVtzaWduYWxdO1xuICAgIGlmICghcmVzcG9uZGVySUQgJiYgc2lnbmFsID09PSBTaWduYWxzLlJFU1BPTkRFUl9SRUxFQVNFKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghbmV4dFN0YXRlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdVbnJlY29nbml6ZWQgc2lnbmFsIGAnICtcbiAgICAgICAgICBzaWduYWwgK1xuICAgICAgICAgICdgIG9yIHN0YXRlIGAnICtcbiAgICAgICAgICBjdXJTdGF0ZSArXG4gICAgICAgICAgJ2AgZm9yIFRvdWNoYWJsZSByZXNwb25kZXIgYCcgK1xuICAgICAgICAgIHJlc3BvbmRlcklEICtcbiAgICAgICAgICAnYCcsXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAobmV4dFN0YXRlID09PSBTdGF0ZXMuRVJST1IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1RvdWNoYWJsZSBjYW5ub3QgdHJhbnNpdGlvbiBmcm9tIGAnICtcbiAgICAgICAgICBjdXJTdGF0ZSArXG4gICAgICAgICAgJ2AgdG8gYCcgK1xuICAgICAgICAgIHNpZ25hbCArXG4gICAgICAgICAgJ2AgZm9yIHJlc3BvbmRlciBgJyArXG4gICAgICAgICAgcmVzcG9uZGVySUQgK1xuICAgICAgICAgICdgJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChjdXJTdGF0ZSAhPT0gbmV4dFN0YXRlKSB7XG4gICAgICB0aGlzLl9wZXJmb3JtU2lkZUVmZmVjdHNGb3JUcmFuc2l0aW9uKGN1clN0YXRlLCBuZXh0U3RhdGUsIHNpZ25hbCwgZSk7XG4gICAgICB0aGlzLnN0YXRlLnRvdWNoYWJsZS50b3VjaFN0YXRlID0gbmV4dFN0YXRlO1xuICAgIH1cbiAgfSxcblxuICBfY2FuY2VsTG9uZ1ByZXNzRGVsYXlUaW1lb3V0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmxvbmdQcmVzc0RlbGF5VGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy5sb25nUHJlc3NEZWxheVRpbWVvdXQpO1xuICAgIHRoaXMubG9uZ1ByZXNzRGVsYXlUaW1lb3V0ID0gbnVsbDtcbiAgfSxcblxuICBfaXNIaWdobGlnaHQ6IGZ1bmN0aW9uKHN0YXRlOiBTdGF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICBzdGF0ZSA9PT0gU3RhdGVzLlJFU1BPTkRFUl9BQ1RJVkVfUFJFU1NfSU4gfHxcbiAgICAgIHN0YXRlID09PSBTdGF0ZXMuUkVTUE9OREVSX0FDVElWRV9MT05HX1BSRVNTX0lOXG4gICAgKTtcbiAgfSxcblxuICBfc2F2ZVByZXNzSW5Mb2NhdGlvbjogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIGNvbnN0IHRvdWNoID0gZXh0cmFjdFNpbmdsZVRvdWNoKGUubmF0aXZlRXZlbnQpO1xuICAgIGNvbnN0IHBhZ2VYID0gdG91Y2ggJiYgdG91Y2gucGFnZVg7XG4gICAgY29uc3QgcGFnZVkgPSB0b3VjaCAmJiB0b3VjaC5wYWdlWTtcbiAgICBjb25zdCBsb2NhdGlvblggPSB0b3VjaCAmJiB0b3VjaC5sb2NhdGlvblg7XG4gICAgY29uc3QgbG9jYXRpb25ZID0gdG91Y2ggJiYgdG91Y2gubG9jYXRpb25ZO1xuICAgIHRoaXMucHJlc3NJbkxvY2F0aW9uID0ge3BhZ2VYLCBwYWdlWSwgbG9jYXRpb25YLCBsb2NhdGlvbll9O1xuICB9LFxuXG4gIF9nZXREaXN0YW5jZUJldHdlZW5Qb2ludHM6IGZ1bmN0aW9uKFxuICAgIGFYOiBudW1iZXIsXG4gICAgYVk6IG51bWJlcixcbiAgICBiWDogbnVtYmVyLFxuICAgIGJZOiBudW1iZXIsXG4gICk6IG51bWJlciB7XG4gICAgY29uc3QgZGVsdGFYID0gYVggLSBiWDtcbiAgICBjb25zdCBkZWx0YVkgPSBhWSAtIGJZO1xuICAgIHJldHVybiBNYXRoLnNxcnQoZGVsdGFYICogZGVsdGFYICsgZGVsdGFZICogZGVsdGFZKTtcbiAgfSxcblxuICAvKipcbiAgICogV2lsbCBwZXJmb3JtIGEgdHJhbnNpdGlvbiBiZXR3ZWVuIHRvdWNoYWJsZSBzdGF0ZXMsIGFuZCBpZGVudGlmeSBhbnlcbiAgICogaGlnaGxpZ2h0aW5nIG9yIHVuaGlnaGxpZ2h0aW5nIHRoYXQgbXVzdCBiZSBwZXJmb3JtZWQgZm9yIHRoaXMgcGFydGljdWxhclxuICAgKiB0cmFuc2l0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0YXRlc30gY3VyU3RhdGUgQ3VycmVudCBUb3VjaGFibGUgc3RhdGUuXG4gICAqIEBwYXJhbSB7U3RhdGVzfSBuZXh0U3RhdGUgTmV4dCBUb3VjaGFibGUgc3RhdGUuXG4gICAqIEBwYXJhbSB7U2lnbmFsfSBzaWduYWwgU2lnbmFsIHRoYXQgdHJpZ2dlcmVkIHRoZSB0cmFuc2l0aW9uLlxuICAgKiBAcGFyYW0ge0V2ZW50fSBlIE5hdGl2ZSBldmVudC5cbiAgICogQHNpZGVlZmZlY3RzXG4gICAqL1xuICBfcGVyZm9ybVNpZGVFZmZlY3RzRm9yVHJhbnNpdGlvbjogZnVuY3Rpb24oXG4gICAgY3VyU3RhdGU6IFN0YXRlLFxuICAgIG5leHRTdGF0ZTogU3RhdGUsXG4gICAgc2lnbmFsOiBTaWduYWwsXG4gICAgZTogUHJlc3NFdmVudCxcbiAgKSB7XG4gICAgY29uc3QgY3VySXNIaWdobGlnaHQgPSB0aGlzLl9pc0hpZ2hsaWdodChjdXJTdGF0ZSk7XG4gICAgY29uc3QgbmV3SXNIaWdobGlnaHQgPSB0aGlzLl9pc0hpZ2hsaWdodChuZXh0U3RhdGUpO1xuXG4gICAgY29uc3QgaXNGaW5hbFNpZ25hbCA9XG4gICAgICBzaWduYWwgPT09IFNpZ25hbHMuUkVTUE9OREVSX1RFUk1JTkFURUQgfHxcbiAgICAgIHNpZ25hbCA9PT0gU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRTtcblxuICAgIGlmIChpc0ZpbmFsU2lnbmFsKSB7XG4gICAgICB0aGlzLl9jYW5jZWxMb25nUHJlc3NEZWxheVRpbWVvdXQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBpc0luaXRpYWxUcmFuc2l0aW9uID1cbiAgICAgIGN1clN0YXRlID09PSBTdGF0ZXMuTk9UX1JFU1BPTkRFUiAmJlxuICAgICAgbmV4dFN0YXRlID09PSBTdGF0ZXMuUkVTUE9OREVSX0lOQUNUSVZFX1BSRVNTX0lOO1xuXG4gICAgY29uc3QgaXNBY3RpdmVUcmFuc2l0aW9uID0gIUlzQWN0aXZlW2N1clN0YXRlXSAmJiBJc0FjdGl2ZVtuZXh0U3RhdGVdO1xuICAgIGlmIChpc0luaXRpYWxUcmFuc2l0aW9uIHx8IGlzQWN0aXZlVHJhbnNpdGlvbikge1xuICAgICAgdGhpcy5fcmVtZWFzdXJlTWV0cmljc09uQWN0aXZhdGlvbigpO1xuICAgIH1cblxuICAgIGlmIChJc1ByZXNzaW5nSW5bY3VyU3RhdGVdICYmIHNpZ25hbCA9PT0gU2lnbmFscy5MT05HX1BSRVNTX0RFVEVDVEVEKSB7XG4gICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyAmJiB0aGlzLnRvdWNoYWJsZUhhbmRsZUxvbmdQcmVzcyhlKTtcbiAgICB9XG5cbiAgICBpZiAobmV3SXNIaWdobGlnaHQgJiYgIWN1cklzSGlnaGxpZ2h0KSB7XG4gICAgICB0aGlzLl9zdGFydEhpZ2hsaWdodChlKTtcbiAgICB9IGVsc2UgaWYgKCFuZXdJc0hpZ2hsaWdodCAmJiBjdXJJc0hpZ2hsaWdodCkge1xuICAgICAgdGhpcy5fZW5kSGlnaGxpZ2h0KGUpO1xuICAgIH1cblxuICAgIGlmIChJc1ByZXNzaW5nSW5bY3VyU3RhdGVdICYmIHNpZ25hbCA9PT0gU2lnbmFscy5SRVNQT05ERVJfUkVMRUFTRSkge1xuICAgICAgY29uc3QgaGFzTG9uZ1ByZXNzSGFuZGxlciA9ICEhdGhpcy5wcm9wcy5vbkxvbmdQcmVzcztcbiAgICAgIGNvbnN0IHByZXNzSXNMb25nQnV0U3RpbGxDYWxsT25QcmVzcyA9XG4gICAgICAgIElzTG9uZ1ByZXNzaW5nSW5bY3VyU3RhdGVdICYmIC8vIFdlICphcmUqIGxvbmcgcHJlc3NpbmcuLiAvLyBCdXQgZWl0aGVyIGhhcyBubyBsb25nIGhhbmRsZXJcbiAgICAgICAgKCFoYXNMb25nUHJlc3NIYW5kbGVyIHx8ICF0aGlzLnRvdWNoYWJsZUxvbmdQcmVzc0NhbmNlbHNQcmVzcygpKTsgLy8gb3Igd2UncmUgdG9sZCB0byBpZ25vcmUgaXQuXG5cbiAgICAgIGNvbnN0IHNob3VsZEludm9rZVByZXNzID1cbiAgICAgICAgIUlzTG9uZ1ByZXNzaW5nSW5bY3VyU3RhdGVdIHx8IHByZXNzSXNMb25nQnV0U3RpbGxDYWxsT25QcmVzcztcbiAgICAgIGlmIChzaG91bGRJbnZva2VQcmVzcyAmJiB0aGlzLnRvdWNoYWJsZUhhbmRsZVByZXNzKSB7XG4gICAgICAgIGlmICghbmV3SXNIaWdobGlnaHQgJiYgIWN1cklzSGlnaGxpZ2h0KSB7XG4gICAgICAgICAgLy8gd2UgbmV2ZXIgaGlnaGxpZ2h0ZWQgYmVjYXVzZSBvZiBkZWxheSwgYnV0IHdlIHNob3VsZCBoaWdobGlnaHQgbm93XG4gICAgICAgICAgdGhpcy5fc3RhcnRIaWdobGlnaHQoZSk7XG4gICAgICAgICAgdGhpcy5fZW5kSGlnaGxpZ2h0KGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnICYmICF0aGlzLnByb3BzLnRvdWNoU291bmREaXNhYmxlZCkge1xuICAgICAgICAgIHRoaXMuX3BsYXlUb3VjaFNvdW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50b3VjaGFibGVIYW5kbGVQcmVzcyhlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRvdWNoYWJsZURlbGF5VGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy50b3VjaGFibGVEZWxheVRpbWVvdXQpO1xuICAgIHRoaXMudG91Y2hhYmxlRGVsYXlUaW1lb3V0ID0gbnVsbDtcbiAgfSxcblxuICBfcGxheVRvdWNoU291bmQ6IGZ1bmN0aW9uKCkge1xuICAgIFVJTWFuYWdlci5wbGF5VG91Y2hTb3VuZCgpO1xuICB9LFxuXG4gIF9zdGFydEhpZ2hsaWdodDogZnVuY3Rpb24oZTogUHJlc3NFdmVudCkge1xuICAgIHRoaXMuX3NhdmVQcmVzc0luTG9jYXRpb24oZSk7XG4gICAgdGhpcy50b3VjaGFibGVIYW5kbGVBY3RpdmVQcmVzc0luICYmIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NJbihlKTtcbiAgfSxcblxuICBfZW5kSGlnaGxpZ2h0OiBmdW5jdGlvbihlOiBQcmVzc0V2ZW50KSB7XG4gICAgaWYgKHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy50b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMgJiZcbiAgICAgICAgdGhpcy50b3VjaGFibGVHZXRQcmVzc091dERlbGF5TVMoKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMucHJlc3NPdXREZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnRvdWNoYWJsZUhhbmRsZUFjdGl2ZVByZXNzT3V0KGUpO1xuICAgICAgICB9LCB0aGlzLnRvdWNoYWJsZUdldFByZXNzT3V0RGVsYXlNUygpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudG91Y2hhYmxlSGFuZGxlQWN0aXZlUHJlc3NPdXQoZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHdpdGhvdXREZWZhdWx0Rm9jdXNBbmRCbHVyOiAoe306ICRURU1QT1JBUlkkb2JqZWN0PHt8fH0+KSxcbn07XG5cbi8qKlxuICogUHJvdmlkZSBhbiBvcHRpb25hbCB2ZXJzaW9uIG9mIHRoZSBtaXhpbiB3aGVyZSBgdG91Y2hhYmxlSGFuZGxlRm9jdXNgIGFuZFxuICogYHRvdWNoYWJsZUhhbmRsZUJsdXJgIGNhbiBiZSBvdmVycmlkZGVuLiBUaGlzIGFsbG93cyBhcHByb3ByaWF0ZSBkZWZhdWx0cyB0b1xuICogYmUgc2V0IG9uIFRWIHBsYXRmb3Jtcywgd2l0aG91dCBicmVha2luZyBleGlzdGluZyBpbXBsZW1lbnRhdGlvbnMgb2ZcbiAqIGBUb3VjaGFibGVgLlxuICovXG5jb25zdCB7XG4gIHRvdWNoYWJsZUhhbmRsZUZvY3VzLFxuICB0b3VjaGFibGVIYW5kbGVCbHVyLFxuICAuLi5Ub3VjaGFibGVNaXhpbldpdGhvdXREZWZhdWx0Rm9jdXNBbmRCbHVyXG59ID0gVG91Y2hhYmxlTWl4aW47XG5Ub3VjaGFibGVNaXhpbi53aXRob3V0RGVmYXVsdEZvY3VzQW5kQmx1ciA9IFRvdWNoYWJsZU1peGluV2l0aG91dERlZmF1bHRGb2N1c0FuZEJsdXI7XG5cbmNvbnN0IFRvdWNoYWJsZSA9IHtcbiAgTWl4aW46IFRvdWNoYWJsZU1peGluLFxuICBUT1VDSF9UQVJHRVRfREVCVUc6IGZhbHNlLCAvLyBIaWdobGlnaHRzIGFsbCB0b3VjaGFibGUgdGFyZ2V0cy4gVG9nZ2xlIHdpdGggSW5zcGVjdG9yLlxuICAvKipcbiAgICogUmVuZGVycyBhIGRlYnVnZ2luZyBvdmVybGF5IHRvIHZpc3VhbGl6ZSB0b3VjaCB0YXJnZXQgd2l0aCBoaXRTbG9wIChtaWdodCBub3Qgd29yayBvbiBBbmRyb2lkKS5cbiAgICovXG4gIHJlbmRlckRlYnVnVmlldzogKHtcbiAgICBjb2xvcixcbiAgICBoaXRTbG9wLFxuICB9OiB7XG4gICAgY29sb3I6IHN0cmluZyB8IG51bWJlcixcbiAgICBoaXRTbG9wOiBFZGdlSW5zZXRzUHJvcCxcbiAgfSk6IG51bGwgfCBSZWFjdC5Ob2RlID0+IHtcbiAgICBpZiAoIVRvdWNoYWJsZS5UT1VDSF9UQVJHRVRfREVCVUcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpZiAoIV9fREVWX18pIHtcbiAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAnVG91Y2hhYmxlLlRPVUNIX1RBUkdFVF9ERUJVRyBzaG91bGQgbm90IGJlIGVuYWJsZWQgaW4gcHJvZCEnLFxuICAgICAgKTtcbiAgICB9XG4gICAgY29uc3QgZGVidWdIaXRTbG9wU3R5bGUgPSB7fTtcbiAgICBoaXRTbG9wID0gaGl0U2xvcCB8fCB7dG9wOiAwLCBib3R0b206IDAsIGxlZnQ6IDAsIHJpZ2h0OiAwfTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBoaXRTbG9wKSB7XG4gICAgICBkZWJ1Z0hpdFNsb3BTdHlsZVtrZXldID0gLWhpdFNsb3Bba2V5XTtcbiAgICB9XG4gICAgY29uc3Qgbm9ybWFsaXplZENvbG9yID0gbm9ybWFsaXplQ29sb3IoY29sb3IpO1xuICAgIGlmICh0eXBlb2Ygbm9ybWFsaXplZENvbG9yICE9PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGhleENvbG9yID1cbiAgICAgICcjJyArICgnMDAwMDAwMDAnICsgbm9ybWFsaXplZENvbG9yLnRvU3RyaW5nKDE2KSkuc3Vic3RyKC04KTtcbiAgICByZXR1cm4gKFxuICAgICAgPFZpZXdcbiAgICAgICAgcG9pbnRlckV2ZW50cz1cIm5vbmVcIlxuICAgICAgICBzdHlsZT17W1xuICAgICAgICAgIHN0eWxlcy5kZWJ1ZyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBib3JkZXJDb2xvcjogaGV4Q29sb3Iuc2xpY2UoMCwgLTIpICsgJzU1JywgLy8gTW9yZSBvcGFxdWVcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogaGV4Q29sb3Iuc2xpY2UoMCwgLTIpICsgJzBGJywgLy8gTGVzcyBvcGFxdWVcbiAgICAgICAgICAgIC4uLmRlYnVnSGl0U2xvcFN0eWxlLFxuICAgICAgICAgIH0sXG4gICAgICAgIF19XG4gICAgICAvPlxuICAgICk7XG4gIH0sXG59O1xuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIGRlYnVnOiB7XG4gICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgYm9yZGVyV2lkdGg6IDEsXG4gICAgYm9yZGVyU3R5bGU6ICdkYXNoZWQnLFxuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVG91Y2hhYmxlO1xuIl19