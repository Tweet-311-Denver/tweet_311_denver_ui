{"version":3,"sources":["Geojson.js"],"names":["makeOverlays","features","points","filter","f","geometry","type","map","feature","makeCoordinates","coordinates","makeOverlay","reduce","flatten","overlay","lines","multipolygons","polygons","concat","prev","curr","length","holes","slice","makePoint","c","latitude","longitude","makeLine","l","g","p","Geojson","props","overlays","geojson","index","color","strokeColor","fillColor","strokeWidth"],"mappings":"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","sourcesContent":["import React from 'react';\nimport MapView from './MapView';\n\nexport const makeOverlays = features => {\n  const points = features\n    .filter(\n      f =>\n        f.geometry &&\n        (f.geometry.type === 'Point' || f.geometry.type === 'MultiPoint')\n    )\n    .map(feature =>\n      makeCoordinates(feature).map(coordinates =>\n        makeOverlay(coordinates, feature)\n      )\n    )\n    .reduce(flatten, [])\n    .map(overlay => ({ ...overlay, type: 'point' }));\n\n  const lines = features\n    .filter(\n      f =>\n        f.geometry &&\n        (f.geometry.type === 'LineString' ||\n          f.geometry.type === 'MultiLineString')\n    )\n    .map(feature =>\n      makeCoordinates(feature).map(coordinates =>\n        makeOverlay(coordinates, feature)\n      )\n    )\n    .reduce(flatten, [])\n    .map(overlay => ({ ...overlay, type: 'polyline' }));\n\n  const multipolygons = features\n    .filter(f => f.geometry && f.geometry.type === 'MultiPolygon')\n    .map(feature =>\n      makeCoordinates(feature).map(coordinates =>\n        makeOverlay(coordinates, feature)\n      )\n    )\n    .reduce(flatten, []);\n\n  const polygons = features\n    .filter(f => f.geometry && f.geometry.type === 'Polygon')\n    .map(feature => makeOverlay(makeCoordinates(feature), feature))\n    .reduce(flatten, [])\n    .concat(multipolygons)\n    .map(overlay => ({ ...overlay, type: 'polygon' }));\n\n  return points.concat(lines).concat(polygons);\n};\n\nconst flatten = (prev, curr) => prev.concat(curr);\n\nconst makeOverlay = (coordinates, feature) => {\n  let overlay = {\n    feature,\n  };\n  if (\n    feature.geometry.type === 'Polygon' ||\n    feature.geometry.type === 'MultiPolygon'\n  ) {\n    overlay.coordinates = coordinates[0];\n    if (coordinates.length > 1) {\n      overlay.holes = coordinates.slice(1);\n    }\n  } else {\n    overlay.coordinates = coordinates;\n  }\n  return overlay;\n};\n\nconst makePoint = c => ({ latitude: c[1], longitude: c[0] });\n\nconst makeLine = l => l.map(makePoint);\n\nconst makeCoordinates = feature => {\n  const g = feature.geometry;\n  if (g.type === 'Point') {\n    return [makePoint(g.coordinates)];\n  } else if (g.type === 'MultiPoint') {\n    return g.coordinates.map(makePoint);\n  } else if (g.type === 'LineString') {\n    return [makeLine(g.coordinates)];\n  } else if (g.type === 'MultiLineString') {\n    return g.coordinates.map(makeLine);\n  } else if (g.type === 'Polygon') {\n    return g.coordinates.map(makeLine);\n  } else if (g.type === 'MultiPolygon') {\n    return g.coordinates.map(p => p.map(makeLine));\n  } else {\n    return [];\n  }\n};\n\nconst Geojson = props => {\n  const overlays = makeOverlays(props.geojson.features);\n  return (\n    <React.Fragment>\n      {overlays.map((overlay, index) => {\n        if (overlay.type === 'point') {\n          return (\n            <MapView.Marker\n              key={index}\n              coordinate={overlay.coordinates}\n              pinColor={props.color}\n            />\n          );\n        }\n        if (overlay.type === 'polygon') {\n          return (\n            <MapView.Polygon\n              key={index}\n              coordinates={overlay.coordinates}\n              holes={overlay.holes}\n              strokeColor={props.strokeColor}\n              fillColor={props.fillColor}\n              strokeWidth={props.strokeWidth}\n            />\n          );\n        }\n        if (overlay.type === 'polyline') {\n          return (\n            <MapView.Polyline\n              key={index}\n              coordinates={overlay.coordinates}\n              strokeColor={props.strokeColor}\n              strokeWidth={props.strokeWidth}\n            />\n          );\n        }\n      })}\n    </React.Fragment>\n  );\n};\n\nexport default Geojson;\n"]}